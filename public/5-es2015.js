(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CG4G:function(e,t,i){"use strict";i.d(t,"a",function(){return n});const n=(e=class{})=>class extends e{getColorString(e){return["hsl(",Math.floor(120*e/100),",100%,50%)"].join("")}}},QlUG:function(e,t,i){"use strict";i.d(t,"a",function(){return v});var n=i("fXoL"),o=i("3Pt+"),r=i("2Vo4"),s=i("hc/g"),a=i("ofXK");let c=(()=>{class e{constructor(e){this.toggleType=new n.n,this.element=e.nativeElement}onTouchStart(){this.toggleType.emit("text")}onTouchEnd(){this.toggleType.emit("password")}onMouseDown(){this.toggleType.emit("text")}onMouseUp(){this.toggleType.emit("password")}onEnterKeyPress(e){"Enter"===e.key&&this.toggleType.emit("text")}onEnterKeyUp(e){"Enter"===e.key&&this.toggleType.emit("password")}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(n.l))},e.\u0275dir=n.Hb({type:e,selectors:[["","appShowPassword",""]],hostBindings:function(e,t){1&e&&n.Zb("touchstart",function(){return t.onTouchStart()})("touchend",function(){return t.onTouchEnd()})("mousedown",function(){return t.onMouseDown()})("mouseup",function(){return t.onMouseUp()})("keypress",function(e){return t.onEnterKeyPress(e)})("keyup",function(e){return t.onEnterKeyUp(e)})},outputs:{toggleType:"toggleType"}}),e})();var l=i("CG4G");const d=function(e){return{width:e}},p=function(e){return{backgroundColor:e}};let u=(()=>{class e extends(Object(l.a)()){constructor(){super()}get passwordStrength(){const e=this.passwordString||"",t=[{regex:/[a-z]/,value:1},{regex:/[a-z](.)*[a-z]/,value:3},{regex:/[A-Z]/,value:1},{regex:/[A-Z](.)*[A-Z]/,value:2},{regex:/\W|_/,value:2},{regex:/(\W|_)(.)*(\W|_)/,value:3},{regex:/[0-9]/,value:2},{regex:/[0-9](.)*[0-9]/,value:2}].reduce((t,i)=>t+(i.regex.test(e)?i.value:0),0);return(Math.min(4,e.length/2)+t)/20*100}get colorString(){return this.getColorString(this.passwordStrength)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["app-password-meter"]],inputs:{passwordString:"passwordString"},features:[n.xb],decls:7,vars:14,consts:[[1,"progress"],["role","progressbar","aria-valuenow","15","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",3,"ngStyle"],["role","progressbar","aria-valuenow","15","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-secondary",3,"ngStyle"]],template:function(e,t){1&e&&(n.Sb(0,"small"),n.Ac(1,"New Password Strength"),n.Rb(),n.Sb(2,"div",0),n.Sb(3,"div",1),n.Ac(4),n.cc(5,"number"),n.Rb(),n.Nb(6,"div",2),n.Rb()),2&e&&(n.Ab(3),n.wc(n.kc(8,d,t.passwordStrength+"%")),n.hc("ngStyle",n.kc(10,p,t.colorString)),n.Ab(1),n.Cc(" ",n.ec(5,5,t.passwordStrength,"2.0-0"),"% "),n.Ab(2),n.hc("ngStyle",n.kc(12,d,100-t.passwordStrength+"%")))},directives:[a.o],pipes:[a.f],styles:[""]}),e})();function b(e,t){if(1&e&&(n.Sb(0,"section",9),n.Sb(1,"span",10),n.Nb(2,"i"),n.Rb(),n.Rb()),2&e){const e=n.bc();n.Eb("is-invalid",e.fieldError),n.Ab(1),n.hc("id","inputGroupPrepend"+e.id),n.Ab(1),n.Cb(e.prependIcon)}}function h(e,t){if(1&e){const e=n.Tb();n.Sb(0,"section",11),n.Sb(1,"button",12),n.Zb("toggleType",function(t){return n.tc(e),n.bc().fieldType=t}),n.Nb(2,"i"),n.Nb(3,"i"),n.Rb(),n.Rb()}if(2&e){const e=n.bc();n.Ab(2),n.Eb("icon-eye","password"===e.fieldType),n.Ab(1),n.Eb("icon-eye-off","password"!==e.fieldType)}}function f(e,t){if(1&e&&(n.Sb(0,"section",13),n.Nb(1,"div",14),n.Ac(2),n.Rb()),2&e){const e=n.bc();n.Ab(2),n.Cc(" ",e.fieldError," ")}}function g(e,t){if(1&e&&(n.Nb(0,"app-password-meter",15),n.cc(1,"async")),2&e){const e=n.bc();n.hc("passwordString",n.dc(1,1,e.passwordStringChangeAction$))}}const m=function(e){return[e]};let v=(()=>{class e{constructor(e){this.appFormService=e,this.formControl=new o.e,this.showPasswordStrength=!1,this.fieldType="text",this.passwordStringChangeSubject$=new r.a(""),this.passwordStringChangeAction$=this.passwordStringChangeSubject$.asObservable()}ngOnInit(){["tel","phone","password","number","date","datetime-local"].includes(this.type)&&(this.fieldType=this.type)}get isRequired(){if(this.formControl.validator){const e=this.formControl.validator(this.formControl);return null!==e&&!0===e.required}return!1}setDisabledState(e){this.disabled||(e?this.disabled=!0:(this.formControl.enable(),this.formControl.updateValueAndValidity()))}ngOnChanges(e){const t=e.triggerValidation;t&&!t.firstChange&&(this.formControl.markAsTouched(),this.validateField())}validate(e){this.formControl=e,this.showPasswordStrength&&this.passwordStringChangeSubject$.next(this.formControl.value)}writeValue(e){void 0!==e&&(this.inputValue=e)}registerOnChange(e){this.onChanges=e}registerOnTouched(e){this.onTouched=e}validateField(){this.fieldError=this.appFormService.getErrorMessage(this.formControl,this.label),this.onTouched()}updateFieldValidation(){this.fieldError&&this.validateField()}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(s.a))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-input"]],inputs:{label:"label",placeholder:"placeholder",id:"id",prependIcon:"prependIcon",formControl:"formControl",triggerValidation:"triggerValidation",autofocus:"autofocus",autocomplete:"autocomplete",type:"type",labelClass:"labelClass",inputClass:"inputClass",step:"step",min:"min",showPasswordStrength:"showPasswordStrength"},features:[n.zb([{provide:o.l,useExisting:Object(n.U)(()=>e),multi:!0},{provide:o.k,useExisting:Object(n.U)(()=>e),multi:!0}]),n.yb],decls:11,vars:26,consts:[[1,"form-group","mb-4",2,"position","relative"],[1,"d-flex","flex-wrap","m-0","p-0","align-items-center"],[3,"for"],[1,"icon-star","required"],["class","input-group-prepend",3,"is-invalid",4,"ngIf"],[1,"form-control",3,"step","min","autocomplete","autofocus","formControl","id","type","placeholder","keyup","blur"],["class","input-group-append",4,"ngIf"],["class","invalid-feedback-message","style","position: absolute;",4,"ngIf"],[3,"passwordString",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text",3,"id"],[1,"input-group-append"],["appShowPassword","","type","button",1,"show-password",3,"toggleType"],[1,"invalid-feedback-message",2,"position","absolute"],[1,"arrow-up"],[3,"passwordString"]],template:function(e,t){1&e&&(n.Sb(0,"section",0),n.Sb(1,"section",1),n.Sb(2,"label",2),n.Nb(3,"span",3),n.Ac(4),n.Rb(),n.Sb(5,"section"),n.yc(6,b,3,5,"section",4),n.Sb(7,"input",5),n.Zb("keyup",function(){return t.updateFieldValidation()})("blur",function(){return t.validateField()}),n.Rb(),n.yc(8,h,4,4,"section",6),n.yc(9,f,3,1,"section",7),n.Rb(),n.Rb(),n.yc(10,g,2,3,"app-password-meter",8),n.Rb()),2&e&&(n.Ab(2),n.Cb("col-md-12 col-lg-12 col-sm-12 control-label "+t.labelClass+" m-0 p-0"),n.hc("for",t.id),n.Ab(1),n.Eb("required-inVisible",!t.isRequired),n.Ab(1),n.Cc("",t.label," "),n.Ab(1),n.Cb(t.inputClass?t.inputClass+" input-group m-0 p-0":"col-md-12 col-lg-12 "+t.inputClass+" input-group m-0 p-0"),n.Ab(1),n.hc("ngIf",t.prependIcon),n.Ab(1),n.Eb("is-invalid",t.fieldError)("is-valid",t.formControl.valid&&t.formControl.touched),n.hc("step",t.step)("min",t.min)("autocomplete",t.autocomplete)("autofocus",t.autofocus)("formControl",t.formControl)("id",n.kc(24,m,t.id))("type",t.fieldType)("placeholder",t.placeholder),n.Ab(1),n.hc("ngIf","password"===t.type),n.Ab(1),n.hc("ngIf",t.fieldError),n.Ab(1),n.hc("ngIf",t.showPasswordStrength))},directives:[a.n,o.b,o.m,o.f,c,u],pipes:[a.b],styles:["@media (max-width:400px){.input-group-prepend[_ngcontent-%COMP%]{display:none}}.invalid-feedback-message[_ngcontent-%COMP%]{padding:4px;line-height:80%;font-size:65%;background:red;right:4%;margin-bottom:-21px;bottom:0;border-radius:4px;position:absolute}.arrow-up[_ngcontent-%COMP%]{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid red;position:absolute;margin-top:-10px;margin-left:20px}.required[_ngcontent-%COMP%]{font-size:.5em;position:absolute;left:-10px;color:#adff2f}.required-inVisible[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%] ~ section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]{color:rgba(0,0,0,.2)}input[_ngcontent-%COMP%]:focus ~ section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%], input[_ngcontent-%COMP%] ~ section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]:hover, section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]:focus{color:#000!important}"]}),e})()},aFxk:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("fXoL");let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Gb({type:e,selectors:[["app-loading-bubble"]],decls:4,vars:0,consts:[["role","status",1,"spinner-grow"],[1,"sr-only"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"span",1),n.Ac(2,"Loading..."),n.Rb(),n.Rb(),n.Ac(3,"\nPlease wait..."))},styles:[""]}),e})()},"hc/g":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("fXoL");let o=(()=>{class e{constructor(){}getErrorMessage(e,t){return this.triggerValidation(e)&&e.errors&&e.errors.required?(t?t+" ":"")+"field is required":this.triggerValidation(e)&&e.errors&&e.errors.email?(t?t+" ":"")+"field should be a valid email":this.triggerValidation(e)&&e.errors&&e.errors.minlength?(t?t+" ":"")+`field too short (min ${e.errors.minlength.requiredLength})`:this.triggerValidation(e)&&e.errors&&e.errors.pattern?"Pattern "+(t?"for "+t+" ":"")+"not met":null}triggerValidation(e){return(e.dirty||e.touched)&&!e.valid}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},oZoq:function(e,t,i){"use strict";i.d(t,"a",function(){return M});var n=i("fXoL"),o=i("GJmQ"),r=i("IzEk"),s=i("lJxs"),a=i("5+tZ"),c=i("2Vo4"),l=i("6M/H"),d=i("K3ix"),p=i("vzMs"),u=i("l7P3"),b=i("tk/3");let h=(()=>{class e{constructor(e){this.http=e}getProfilePicture({fileId:e}){const t=new b.d;return t.append("Accept","application/pdf"),t.append("Content-Type","application/pdf"),this.http.get(`api/files/${e}`,{headers:t,responseType:"blob"})}fitImageOn(e,t){const i=e.getContext("2d");e.height=e.width;const n=t.width/t.height,o=e.width/e.height;let r,s,a,c;n<o?(r=e.height,s=t.width*(r/t.height),a=(e.width-s)/2,c=0):n>o?(s=e.width,r=t.height*(s/t.width),a=0,c=(e.height-r)/2):(r=e.height,s=e.width,a=0,c=0),null==i||i.drawImage(t,a,c,s,r)}}return e.\u0275fac=function(t){return new(t||e)(n.Wb(b.b))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=i("3Pt+"),g=i("ofXK"),m=i("wZYl"),v=i("tyNb");const S=["profPic"];function w(e,t){1&e&&(n.Sb(0,"span",26),n.Nb(1,"i",27),n.Rb())}function y(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",28),n.Sb(1,"input",29,30),n.Zb("change",function(){n.tc(e);const t=n.bc(),i=n.qc(39);return t.onFileSelected(i)}),n.Rb(),n.Sb(3,"button",31),n.Zb("click",function(){return n.tc(e),n.qc(2).click()}),n.Sb(4,"span"),n.Ac(5,"Upload Photo"),n.Rb(),n.Rb(),n.Rb()}}function P(e,t){if(1&e&&(n.Sb(0,"li",21),n.Sb(1,"a",22),n.Ac(2),n.cc(3,"titlecase"),n.Rb(),n.Rb()),2&e){const e=t.$implicit,i=n.bc();n.Ab(1),n.hc("routerLink",i.fullLink(e)),n.Ab(1),n.Bc(n.dc(3,2,e))}}function C(e,t){1&e&&n.Nb(0,"i",45)}function x(e,t){1&e&&n.Nb(0,"i",27)}function A(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",32),n.Sb(1,"h4",33),n.Ac(2,"Profile Picture Preview"),n.Rb(),n.Sb(3,"button",34),n.Zb("click",function(){return n.tc(e),n.bc().hideModal()}),n.Sb(4,"span",35),n.Ac(5,"\xd7"),n.Rb(),n.Rb(),n.Rb(),n.Sb(6,"div",36),n.Sb(7,"div",37),n.Sb(8,"div",38),n.Nb(9,"canvas",39),n.Rb(),n.Rb(),n.Rb(),n.Sb(10,"div",40),n.Sb(11,"button",41),n.Zb("click",function(){return n.tc(e),n.bc().hideModal()}),n.Ac(12,"Cancel"),n.Rb(),n.Sb(13,"button",42),n.Zb("click",function(){return n.tc(e),n.bc().saveProfilePic()}),n.Ac(14," Save Profile Picture "),n.yc(15,C,1,0,"i",43),n.yc(16,x,1,0,"i",44),n.Rb(),n.Rb()}if(2&e){const e=n.bc();n.Ab(15),n.hc("ngIf",!e.savingProfPic),n.Ab(1),n.hc("ngIf",e.savingProfPic)}}const I=function(){return["password-management"]};let M=(()=>{class e{constructor(e,t,i,o){this.modalService=e,this.usersService=t,this.store=i,this.canvasService=o,this.includeProfileId=!0,this.valueChanged=new n.n,this.editMode=!1,this.componentIsActive=!0,this.profPicLoadingSubject$=new c.a(!0),this.profPicLoadingAction$=this.profPicLoadingSubject$.asObservable()}ngOnInit(){this.getProfilePic()}editModeChangeHandler(){this.store.dispatch(this.editMode?Object(l.b)():Object(l.a)())}getProfilePic(){this.profPicLoadingSubject$.next(!0),this.usersService.getProfilePicture({userId:this.profile.id}).pipe(Object(o.a)(()=>this.componentIsActive),Object(r.a)(1)).subscribe(e=>{this.profPic.nativeElement.src=URL.createObjectURL(e),this.profPicLoadingSubject$.next(!1)})}get fullName(){return this.profile.firstName+" "+this.profile.lastName+(this.profile.middleName?" "+this.profile.middleName:"")+(this.profile.otherNames?" "+this.profile.otherNames:"")+(this.profile.userId?" "+this.profile.userId:"")}fullLink(e){return this.includeProfileId?[...this.linkBase,this.profile.id,e]:[...this.linkBase,e]}saveProfilePic(){this.savingProfPic=!0,this.usersService.uploadPhoto({file:this.photoFile}).pipe(Object(s.a)(e=>e.data.id),Object(a.a)(e=>this.usersService.saveProfilePicture({userId:this.profile.id,profilePicId:e})),Object(o.a)(()=>this.componentIsActive)).subscribe({next:()=>{this.savingProfPic=!1,this.hideModal(),this.profPic.nativeElement.src=this.photoSrc},error:()=>this.savingProfPic=!1})}openModal(e){this.modalRef=this.modalService.show(e),this.modalRef.setClass("modal-md bg-dark text-light modal-container ")}hideModal(){document.querySelector("#profilePhotoInput").value="",this.modalRef.hide()}onFileSelected(e){const t=document.querySelector("#profilePhotoInput");if(this.photoFile=t.files[0],this.photoFile){this.openModal(e);const t=document.querySelector("#profilePhotoCanvas");this.context=t.getContext("2d");const i=new Image;this.photoSrc=URL.createObjectURL(this.photoFile),i.onload=()=>{this.canvasService.fitImageOn(t,i)},i.src=this.photoSrc}}changeProfile(e,t){this.valueChanged.emit({fieldName:e,fieldNewValue:t})}ngOnDestroy(){this.componentIsActive=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(d.a),n.Mb(p.a),n.Mb(u.h),n.Mb(h))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-user-profile"]],viewQuery:function(e,t){if(1&e&&n.Fc(S,1),2&e){let e;n.pc(e=n.ac())&&(t.profPic=e.first)}},inputs:{title:"title",profile:"profile",linkBase:"linkBase",links:"links",includeProfileId:"includeProfileId"},outputs:{valueChanged:"valueChanged"},decls:40,vars:24,consts:[[1,"d-flex","justify-content-between","align-items-start"],[1,"custom-control","custom-switch","mt-3"],["type","checkbox","id","editMode",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","editMode",1,"custom-control-label"],[1,"d-flex","flex-wrap"],[1,"col-sm-5","col-md-4","col-lg-2","d-flex","justify-content-center"],["class","prof-pic-loading d-flex align-items-center justify-content-center",4,"ngIf"],["class","upload-profile-pic",4,"ngIf"],["src","assets/images/default-user.jpg","onerror",'this.src="assets/images/default-user.jpg";',"alt","",1,"img-thumbnail","img-fluid"],["profPic",""],[1,"col-sm-7","col-md-8","col-lg-9","d-flex","align-items-lg-between","flex-wrap"],[1,"col-lg-12","d-flex","flex-wrap","justify-content-between","align-items-lg-center"],[1,"col-sm-12","d-flex","justify-content-between"],[1,"col-lg-6"],["label","First Name",3,"userId","name","valueChanged"],["label","Last Name",3,"userId","name","valueChanged"],["label","Middle Name",3,"userId","name","valueChanged"],["label","Other Names",3,"userId","name","valueChanged"],[1,"col-sm-12","mt-3"],[1,"nav","nav-tabs","nav-fill"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"col-sm-12","info-route"],["studentId","1"],["template",""],[1,"prof-pic-loading","d-flex","align-items-center","justify-content-center"],[1,"icon-spin3","animate-spin"],[1,"upload-profile-pic"],["id","profilePhotoInput","accept","image/*","hidden","","type","file",3,"change"],["fileInput",""],[1,"btn","btn","secondary",3,"click"],[1,"modal-header","bg-dark"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","bg-dark"],[1,"d-flex","justify-content-center"],[1,"col-lg-12"],["id","profilePhotoCanvas",2,"max-width","500px"],[1,"modal-footer","bg-dark"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click"],["class","icon-floppy",4,"ngIf"],["class","icon-spin3 animate-spin",4,"ngIf"],[1,"icon-floppy"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"h1"),n.Ac(2),n.Rb(),n.Sb(3,"div",1),n.Sb(4,"input",2),n.Zb("ngModelChange",function(e){return t.editMode=e})("ngModelChange",function(){return t.editModeChangeHandler()}),n.Rb(),n.Sb(5,"label",3),n.Ac(6," Enable Editing "),n.Nb(7,"span"),n.Nb(8,"span"),n.Rb(),n.Rb(),n.Rb(),n.Sb(9,"section",4),n.Sb(10,"section",5),n.yc(11,w,2,0,"span",6),n.cc(12,"async"),n.yc(13,y,6,0,"div",7),n.Nb(14,"img",8,9),n.Rb(),n.Sb(16,"section",10),n.Sb(17,"section",11),n.Sb(18,"section",12),n.Sb(19,"h2"),n.Ac(20),n.cc(21,"uppercase"),n.Rb(),n.Rb(),n.Sb(22,"section",13),n.Sb(23,"app-name-item",14),n.Zb("valueChanged",function(e){return t.changeProfile("firstName",e)}),n.Rb(),n.Rb(),n.Sb(24,"section",13),n.Sb(25,"app-name-item",15),n.Zb("valueChanged",function(e){return t.changeProfile("lastName",e)}),n.Rb(),n.Rb(),n.Sb(26,"section",13),n.Sb(27,"app-name-item",16),n.Zb("valueChanged",function(e){return t.changeProfile("middleName",e)}),n.Rb(),n.Rb(),n.Sb(28,"section",13),n.Sb(29,"app-name-item",17),n.Zb("valueChanged",function(e){return t.changeProfile("otherNames",e)}),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(30,"section",18),n.Sb(31,"ul",19),n.yc(32,P,4,4,"li",20),n.Sb(33,"li",21),n.Sb(34,"a",22),n.Ac(35,"Password Management"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Sb(36,"section",23),n.Nb(37,"router-outlet",24),n.Rb(),n.Rb(),n.yc(38,A,17,2,"ng-template",null,25,n.zc)),2&e&&(n.Ab(2),n.Cc("",t.title," Profile "),n.Ab(2),n.hc("ngModel",t.editMode),n.Ab(3),n.Eb("icon-edit",t.editMode),n.Ab(1),n.Eb("icon-eye",!t.editMode),n.Ab(3),n.hc("ngIf",n.dc(12,19,t.profPicLoadingAction$)),n.Ab(2),n.hc("ngIf",t.editMode),n.Ab(7),n.Bc(n.dc(21,21,t.fullName)),n.Ab(3),n.hc("userId",t.profile.id)("name",t.profile.firstName),n.Ab(2),n.hc("userId",t.profile.id)("name",t.profile.lastName),n.Ab(2),n.hc("userId",t.profile.id)("name",t.profile.middleName),n.Ab(2),n.hc("userId",t.profile.id)("name",t.profile.otherNames),n.Ab(3),n.hc("ngForOf",t.links),n.Ab(2),n.hc("routerLink",n.jc(23,I)))},directives:[f.a,f.m,f.o,g.n,m.a,g.m,v.i,v.h,v.k],pipes:[g.b,g.v,g.u],styles:["h2[_ngcontent-%COMP%]{max-height:35px}.nav[_ngcontent-%COMP%]{border-bottom:0;margin-top:-5px}.info-route[_ngcontent-%COMP%]{margin-right:15px;margin-left:15px;min-height:270px;margin-top:-1px;z-index:1;max-width:calc(100% - 20px)}.active[_ngcontent-%COMP%], .info-route[_ngcontent-%COMP%]{background:#232323!important;border:1px solid #585858!important;position:relative}.active[_ngcontent-%COMP%]{color:#adff2f!important;border-bottom:none!important;z-index:10;border-top-left-radius:15px;border-top-right-radius:15px}.nav-link[_ngcontent-%COMP%]:active, .nav-link[_ngcontent-%COMP%]:focus{outline-style:dashed}"]}),e})()},vzMs:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("tk/3"),o=i("lJxs"),r=i("fXoL");let s=(()=>{class e{constructor(e){this.http=e,this.users$=this.http.get("api/users").pipe(Object(o.a)(e=>e)),this.resetPasswordForUserWithId=({id:e,resetPassword:t})=>this.http.post(`api/users/${e}/password-reset`,{reset_password:t})}findIfEmailExists(e){return this.http.get(`api/users/email/?q=${e}`)}update({userId:e,fieldName:t,fieldNewValue:i}){const n={[t]:i};return this.http.post(`api/users/${e}`,{_method:"PATCH",first_name:n.FirstName,last_name:n.LastName,middle_name:n.MiddleName,other_names:n.OtherNames,gender_id:n.gender,religion_id:n.religion,date_of_birth:n.DateOfBirth,email:n.Email,phone:n.Phone})}uploadPhoto({file:e}){const t=new FormData,i=new n.d;return i.append("Content-Type","multipart/form-data"),i.append("Accept","application/json"),t.append("profilePicture",e),this.http.post("api/users/profile-picture",t,{headers:i})}saveProfilePicture({userId:e,profilePicId:t}){return this.http.post(`api/users/${e}`,Object.assign(Object.assign({},{profile_pic_id:t}),{_method:"PATCH"}))}getProfilePicture({userId:e}){const t=new n.d;return t.append("Accept","application/pdf"),t.append("Content-Type","application/pdf"),this.http.get(`api/users/profile-picture/${e}`,{headers:t,responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(r.Wb(n.b))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},wZYl:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var n=i("fXoL"),o=i("3Pt+"),r=i("l7P3"),s=i("GJmQ"),a=i("gEt1"),c=i("vzMs"),l=i("ofXK"),d=i("QlUG");function p(e,t){1&e&&n.Nb(0,"i",13)}function u(e,t){1&e&&n.Nb(0,"i",14)}function b(e,t){if(1&e){const e=n.Tb();n.Sb(0,"div",5),n.Nb(1,"app-input",6),n.Sb(2,"div",7),n.Sb(3,"button",8),n.Zb("click",function(){return n.tc(e),n.bc().editable=!1}),n.Ac(4,"Cancel "),n.Rb(),n.Sb(5,"button",9),n.yc(6,p,1,0,"i",10),n.yc(7,u,1,0,"i",11),n.Nb(8,"span",12),n.Ac(9,"Save "),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=n.bc();n.Ab(1),n.hc("type",e.type)("label",e.label)("placeholder","Enter "+e.label),n.Ab(4),n.hc("disabled",e.itemForm.invalid||!e.itemForm.dirty),n.Ab(1),n.hc("ngIf",e.itemForm.valid&&!e.isSubmitting),n.Ab(1),n.hc("ngIf",e.isSubmitting)}}function h(e,t){if(1&e){const e=n.Tb();n.Sb(0,"button",15),n.Zb("click",function(){return n.tc(e),n.bc().editable=!0})("mouseout",function(){return n.tc(e),n.bc().editHovered=!1})("mouseover",function(){return n.tc(e),n.bc().editHovered=!0}),n.Nb(1,"span"),n.Rb()}if(2&e){const e=n.bc();n.Bb("aria-label","Edit "+e.label+" Name"),n.Ab(1),n.Eb("icon-pencil-1",!e.editHovered)("icon-edit",e.editHovered)}}let f=(()=>{class e{constructor(e,t,i){this.fb=e,this.usersService=t,this.store=i,this.label="",this.valueChanged=new n.n,this.editHovered=!1,this.editable=!1,this.isSubmitting=!1}ngOnInit(){var e;this.editMode$=this.store.pipe(Object(r.t)(a.b)),this.componentIsActive=!0,this.itemForm=this.fb.group({name:[this.name,o.v.minLength(2)]}),["first","last","email"].includes(this.label.toLocaleLowerCase())&&(null===(e=this.itemForm.get("name"))||void 0===e||e.setValidators([o.v.required,o.v.minLength(2)])),this.itemForm.updateValueAndValidity()}submitFormItem(){var e;if(this.itemForm.valid){this.isSubmitting=!0;const t=null===(e=this.itemForm.get("name"))||void 0===e?void 0:e.value;this.usersService.update({fieldName:this.label.replace(" ",""),fieldNewValue:t,userId:this.userId}).pipe(Object(s.a)(()=>this.componentIsActive)).subscribe({complete:()=>this.isSubmitting=!1,next:()=>{this.valueChanged.emit(t),this.editable=!1}})}else alert("Form not filled correctly")}ngOnDestroy(){this.componentIsActive=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(o.d),n.Mb(c.a),n.Mb(r.h))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-name-item"]],inputs:{type:"type",name:"name",label:"label",userId:"userId"},outputs:{valueChanged:"valueChanged"},decls:10,vars:9,consts:[[1,"d-flex","flex-wrap","align-items-center",3,"formGroup","submit"],["class","edit-field p-3 pt-0",4,"ngIf"],[1,"label","col-xs-12","col-sm-4","col-lg-4"],[1,"value","col","col-xs-12","p-1","d-flex","justify-content-between"],["type","button","class","icon",3,"click","mouseout","mouseover",4,"ngIf"],[1,"edit-field","p-3","pt-0"],["type","text","id","itemNameInput","labelClass","col-lg-12","inputClass","col-lg-12","formControlName","name",3,"type","label","placeholder"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","mt-2",3,"click"],[1,"btn","btn-success","mt-2",3,"disabled"],["class","icon-floppy",4,"ngIf"],["class","icon-spin3 animate-spin",4,"ngIf"],[1,"icon-save"],[1,"icon-floppy"],[1,"icon-spin3","animate-spin"],["type","button",1,"icon",3,"click","mouseout","mouseover"]],template:function(e,t){1&e&&(n.Sb(0,"section"),n.Sb(1,"form",0),n.Zb("submit",function(){return t.submitFormItem()}),n.yc(2,b,10,6,"div",1),n.Sb(3,"div",2),n.Ac(4),n.cc(5,"titlecase"),n.Rb(),n.Sb(6,"div",3),n.Ac(7),n.yc(8,h,2,5,"button",4),n.cc(9,"async"),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.Ab(1),n.hc("formGroup",t.itemForm),n.Ab(1),n.hc("ngIf",t.editable),n.Ab(2),n.Cc("",n.dc(5,5,t.label),":"),n.Ab(3),n.Cc(" \xa0 ",t.name," "),n.Ab(1),n.hc("ngIf",n.dc(9,7,t.editMode$)))},directives:[o.x,o.n,o.h,l.n,d.a,o.m,o.g],pipes:[l.u,l.b],styles:[".label[_ngcontent-%COMP%], .name-field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;line-height:2em}.value[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,82.7%,.3);margin-top:5px}.icon[_ngcontent-%COMP%]{background-color:inherit;border:none;padding:0;color:#2cb5e2}.icon[_ngcontent-%COMP%]:hover{color:#b8e75a}.edit-field[_ngcontent-%COMP%]{position:absolute;top:0;background-color:#2e2b2b;width:100%;z-index:30;border-radius:5px;border:double grey}"]}),e})()}}]);