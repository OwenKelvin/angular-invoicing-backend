(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{aFxk:function(t,e,c){"use strict";c.d(e,"a",function(){return i});var s=c("fXoL");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Gb({type:t,selectors:[["app-loading-bubble"]],decls:4,vars:0,consts:[["role","status",1,"spinner-grow"],[1,"sr-only"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"span",1),s.Ac(2,"Loading..."),s.Rb(),s.Rb(),s.Ac(3,"\nPlease wait..."))},styles:[""]}),t})()},aPer:function(t,e,c){"use strict";c.r(e),c.d(e,"EditSoldProductsModule",function(){return M});var s=c("ofXK"),i=c("tyNb"),n=c("2Vo4"),a=c("itXk"),b=c("vkgz"),d=c("lJxs"),l=c("1G5W"),o=c("5+tZ"),r=c("B/gT"),u=c("JwhK"),p=c("cTCC"),h=c("sEf6"),S=c("fXoL"),f=c("K3ix"),m=c("l7P3"),g=c("kOKB"),j=c("+MiJ"),A=c("oGmh");function R(t,e){1&t&&(S.Sb(0,"tr"),S.Sb(1,"td",10),S.Ac(2," No sale on this date found! "),S.Rb(),S.Rb())}function $(t,e){1&t&&(S.Sb(0,"span"),S.Ac(1,"s"),S.Rb())}function O(t,e){if(1&t){const t=S.Tb();S.Sb(0,"tr"),S.Sb(1,"td"),S.Ac(2),S.Rb(),S.Sb(3,"td"),S.Ac(4),S.Rb(),S.Sb(5,"td"),S.Ac(6),S.cc(7,"titlecase"),S.Rb(),S.Sb(8,"td"),S.Ac(9),S.cc(10,"currency"),S.Rb(),S.Sb(11,"td"),S.Ac(12),S.yc(13,$,2,0,"span",8),S.Ac(14),S.cc(15,"currency"),S.Rb(),S.Sb(16,"td",7),S.Sb(17,"button",11),S.Zb("click",function(){S.tc(t);const c=e.$implicit;return S.bc(2).editSoldItem(c.id)}),S.Nb(18,"span",12),S.Rb(),S.Sb(19,"button",13),S.Zb("click",function(){S.tc(t);const c=e.$implicit;return S.bc(2).deleteSoldItem(c.id)}),S.Nb(20,"span",14),S.Rb(),S.Rb(),S.Rb()}if(2&t){const t=e.$implicit;S.Ab(2),S.Ec("#",t.productId,"/",t.saleId,"-",t.id,""),S.Ab(2),S.Bc(t.time),S.Ab(2),S.Bc(S.dc(7,9,t.productName)),S.Ab(3),S.Bc(S.ec(10,11,t.price," ")),S.Ab(3),S.Cc("",t.quantity," unit"),S.Ab(1),S.hc("ngIf",t.quantity>1),S.Ab(1),S.Cc(" @ ",S.ec(15,14,t.sellingPrice,t.sellingPriceCurrency+" "),"")}}function I(t,e){if(1&t&&(S.Qb(0),S.yc(1,R,3,0,"tr",8),S.yc(2,O,21,17,"tr",9),S.Pb()),2&t){const t=e.ngIf;S.Ab(1),S.hc("ngIf",t.length<1),S.Ab(1),S.hc("ngForOf",t)}}const v=[{path:"",pathMatch:"full",data:{breadcrumb:null},component:(()=>{class t extends(Object(r.a)(Object(h.a)())){constructor(t,e,c){super(),this.modalService=t,this.store=e,this.salesService=c,this.deletedIds=[],this.updatedItems={},this.deletedIdSubject$=new n.a([]),this.updateSubject$=new n.a({}),this.updateAction$=this.salesService.updateSoldProductAction$.pipe(Object(b.a)(t=>this.updatedItems=Object.assign(Object.assign({},this.updatedItems),{[t.id]:t})),Object(d.a)(()=>this.updatedItems),Object(b.a)(t=>this.updateSubject$.next(t)),Object(l.a)(this.destroyed$)),this.deletedIdAction$=this.salesService.deleteSoldProductAction$.pipe(Object(b.a)(t=>this.deletedIds=[...new Set([...this.deletedIds,t])]),Object(d.a)(()=>this.deletedIds),Object(b.a)(t=>this.deletedIdSubject$.next(t)),Object(l.a)(this.destroyed$)),this.storeInjected=this.store,this.modalServiceInjected=this.modalService,this.saleDates$=this.salesService.saleDates$,this.saleDateSubject$=new n.a(new Date),this.saleDateAction$=this.saleDateSubject$.asObservable(),this.sales$=this.saleDateAction$.pipe(Object(o.a)(t=>this.salesService.getSoldProductsForDate$(t))),this.salesFiltered$=Object(a.a)([this.deletedIdSubject$.asObservable(),this.updateSubject$.asObservable(),this.sales$]).pipe(Object(d.a)(([t,e,c])=>{const s=Object.assign({},c.reduce((t,c)=>Object.assign(Object.assign({},t),{[c.id]:Object.assign(Object.assign({},c),null==e?void 0:e[c.id])}),{}));return Object.values(s).filter(e=>!t.includes(e.id))}))}ngOnInit(){this.deletedIdAction$.subscribe(),this.updateAction$.subscribe()}deleteSoldItem(t){this.openModal({id:t,component:u.a})}editSoldItem(t){this.openModal({id:t,component:p.a})}ngOnDestroy(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}}return t.\u0275fac=function(e){return new(e||t)(S.Mb(f.a),S.Mb(m.h),S.Mb(g.a))},t.\u0275cmp=S.Gb({type:t,selectors:[["app-edit-sold-products"]],features:[S.xb],decls:27,vars:4,consts:[[1,"d-flex","flex-wrap","align-items-end","justify-content-between"],[1,"col-md-4","col-xl-3","col-lg-3","col-sm-4"],["label","Sale Date",3,"enabledDates$","ngModelChange"],[1,"col-xl-2","col-md-2","text-md-right","col-lg-2","text-right","mt-3"],["selector",".printable"],[1,"printable"],[1,"mt-2","table","table-sm","table-dark"],[1,"d-print-none"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"alert","alert-info","p-2","m-2"],["aria-label","Edit Item",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"icon-edit"],["aria-label","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"icon-trash"]],template:function(t,e){1&t&&(S.Sb(0,"h1"),S.Ac(1,"Edit Sales"),S.Rb(),S.Sb(2,"div",0),S.Sb(3,"section",1),S.Sb(4,"app-date-picker",2),S.Zb("ngModelChange",function(t){return e.saleDateSubject$.next(t)}),S.Rb(),S.Rb(),S.Sb(5,"section",3),S.Nb(6,"app-print",4),S.Rb(),S.Rb(),S.Sb(7,"div",5),S.Sb(8,"div",5),S.Sb(9,"table",6),S.Sb(10,"thead"),S.Sb(11,"tr"),S.Sb(12,"th"),S.Ac(13,"Ref"),S.Rb(),S.Sb(14,"th"),S.Ac(15,"Time"),S.Rb(),S.Sb(16,"th"),S.Ac(17,"Product Name"),S.Rb(),S.Sb(18,"th"),S.Ac(19,"Purchase Price"),S.Rb(),S.Sb(20,"th"),S.Ac(21,"Selling Price"),S.Rb(),S.Sb(22,"th",7),S.Ac(23,"Action"),S.Rb(),S.Rb(),S.Rb(),S.Sb(24,"tbody"),S.yc(25,I,3,2,"ng-container",8),S.cc(26,"async"),S.Rb(),S.Rb(),S.Rb(),S.Rb()),2&t&&(S.Ab(4),S.hc("enabledDates$",e.saleDates$),S.Ab(21),S.hc("ngIf",S.dc(26,2,e.salesFiltered$)))},directives:[j.a,A.a,s.n,s.m],pipes:[s.b,s.u,s.d],styles:[""]}),t})(),canDeactivate:[c("wNMA").a]}];let y=(()=>{class t{}return t.\u0275mod=S.Kb({type:t}),t.\u0275inj=S.Jb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(v)],i.j]}),t})();var w=c("B3RB"),D=c("7HrD"),P=c("Yg/+"),x=c("3Pt+"),k=c("jdGB");let M=(()=>{class t{}return t.\u0275mod=S.Kb({type:t}),t.\u0275inj=S.Jb({factory:function(e){return new(e||t)},imports:[[x.j,x.s,s.c,y,w.a,D.a,f.b.forRoot(),P.a,k.a]]}),t})()}}]);