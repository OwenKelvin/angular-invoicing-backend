(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{B3RB:function(t,n,e){"use strict";e.d(n,"a",function(){return o});var r=e("ofXK"),c=e("fXoL");let o=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(n){return new(n||t)},imports:[[r.c]]}),t})()},LEGc:function(t,n,e){"use strict";e.r(n),e.d(n,"MPesaReceiptReportModule",function(){return g});var r=e("ofXK"),c=e("tyNb"),o=e("+Kmi"),i=e("3Pt+"),b=e("fXoL"),s=e("lJxs"),a=e("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.url="api/m-pesa/receipts"}getReceipts(t){return this.http.get(this.url,{params:{start_date:t.startDate,end_date:t.endDate}}).pipe(Object(s.a)(t=>t.map(t=>Object.assign(Object.assign({},t),{ref:t.trans_id,dateTime:t.trans_time,mobileNumber:t.receiver_party.split("-")[0],name:t.receiver_party.split("-")[1],amount:t.trans_amount}))))}}return t.\u0275fac=function(n){return new(n||t)(b.Wb(a.b))},t.\u0275prov=b.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=e("oGmh");function u(t,n){1&t&&b.Nb(0,"i",15)}function d(t,n){1&t&&b.Nb(0,"i",16)}function m(t,n){if(1&t&&(b.Sb(0,"tr"),b.Sb(1,"td"),b.Ac(2),b.Rb(),b.Sb(3,"td"),b.Ac(4),b.Rb(),b.Sb(5,"td"),b.Ac(6),b.Rb(),b.Sb(7,"td"),b.Ac(8),b.cc(9,"titlecase"),b.Rb(),b.Sb(10,"td"),b.Ac(11),b.cc(12,"currency"),b.Rb(),b.Sb(13,"td"),b.Ac(14),b.Rb(),b.Rb()),2&t){const t=n.$implicit;b.Ab(2),b.Bc(t.dateTime),b.Ab(2),b.Bc(t.ref),b.Ab(2),b.Bc(t.mobileNumber),b.Ab(2),b.Bc(b.dc(9,6,t.name)),b.Ab(3),b.Bc(b.ec(12,8,t.amount," ")),b.Ab(3),b.Bc(t.status)}}function f(t,n){1&t&&(b.Sb(0,"tr"),b.Sb(1,"td",20),b.Sb(2,"section",21),b.Ac(3,"No Data Found"),b.Rb(),b.Rb(),b.Rb())}function h(t,n){if(1&t&&(b.Sb(0,"table",17),b.Sb(1,"thead"),b.Sb(2,"tr"),b.Sb(3,"th"),b.Ac(4,"Date Time"),b.Rb(),b.Sb(5,"th"),b.Ac(6,"Tran Ref"),b.Rb(),b.Sb(7,"th"),b.Ac(8,"Mobile Number"),b.Rb(),b.Sb(9,"th"),b.Ac(10,"Name"),b.Rb(),b.Sb(11,"th"),b.Ac(12,"Amount Received"),b.Rb(),b.Sb(13,"th"),b.Ac(14,"Status"),b.Rb(),b.Rb(),b.Rb(),b.Sb(15,"tbody"),b.yc(16,m,15,11,"tr",18),b.Rb(),b.Sb(17,"tfoot"),b.yc(18,f,4,0,"tr",19),b.Rb(),b.Rb()),2&t){const t=n.ngIf;b.Ab(16),b.hc("ngForOf",t),b.Ab(2),b.hc("ngIf",t.length<1)}}const R=[{path:"",pathMatch:"full",component:(()=>{class t extends(Object(o.a)()){constructor(t,n){super(),this.fb=t,this.mPesaService=n,this.itemForm=this.fb.group({startDate:[(new Date).toISOString().substr(0,10),[i.v.required]],endDate:[(new Date).toISOString().substr(0,10),[i.v.required]]}),this.receipts$=this.mPesaService.getReceipts(this.itemForm.value)}ngOnInit(){}getReport(){}}return t.\u0275fac=function(n){return new(n||t)(b.Mb(i.d),b.Mb(l))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-m-pesa-receipt-report"]],features:[b.xb],decls:24,vars:11,consts:[[3,"formGroup","submit"],[1,"d-flex","align-items-end","flex-wrap"],[1,"col-sm-6","col-md-6","col-lg-4","col-xl-3"],["for","startDate",1,"control-label"],["formControlName","startDate","type","date","id","startDate",1,"form-control"],["for","endDate",1,"control-label"],["formControlName","endDate","type","date","id","endDate",1,"form-control"],[1,"col-sm-6","col-md-6","col-lg-4","col-xl-3","mt-md-2","mt-sm-2"],[1,"btn","btn-primary",3,"disabled"],["class","icon-ok",4,"ngIf"],["class","icon-spin3 animate-spin",4,"ngIf"],[1,"text-right"],["selector",".printable"],[1,"printable"],["class","table table-dark mt-3",4,"ngIf"],[1,"icon-ok"],[1,"icon-spin3","animate-spin"],[1,"table","table-dark","mt-3"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],[1,"alert","alert-info"]],template:function(t,n){1&t&&(b.Sb(0,"h1"),b.Ac(1,"M Pesa Receipt Report"),b.Rb(),b.Sb(2,"form",0),b.Zb("submit",function(){return n.getReport()}),b.Sb(3,"section",1),b.Sb(4,"section",2),b.Sb(5,"label",3),b.Ac(6,"From"),b.Rb(),b.Nb(7,"input",4),b.Rb(),b.Sb(8,"section",2),b.Sb(9,"label",5),b.Ac(10,"To"),b.Rb(),b.Nb(11,"input",6),b.Rb(),b.Sb(12,"section",7),b.Sb(13,"button",8),b.Ac(14," Generate Report "),b.yc(15,u,1,0,"i",9),b.cc(16,"async"),b.yc(17,d,1,0,"i",10),b.cc(18,"async"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(19,"section",11),b.Nb(20,"app-print",12),b.Rb(),b.Sb(21,"section",13),b.yc(22,h,19,2,"table",14),b.cc(23,"async"),b.Rb()),2&t&&(b.Ab(2),b.hc("formGroup",n.itemForm),b.Ab(11),b.hc("disabled",n.itemForm.invalid),b.Ab(2),b.hc("ngIf",n.itemForm.valid&&!1===b.dc(16,5,n.submitInProgressAction$)),b.Ab(2),b.hc("ngIf",b.dc(18,7,n.submitInProgressAction$)),b.Ab(5),b.hc("ngIf",b.dc(23,9,n.receipts$)))},directives:[i.x,i.n,i.h,i.b,i.m,i.g,r.n,p.a,r.m],pipes:[r.b,r.u,r.d],styles:[""]}),t})(),data:{breadcrumb:"M Pesa Receipts Report"}}];let S=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(n){return new(n||t)},imports:[[c.j.forChild(R)],c.j]}),t})();var y=e("B3RB");let g=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(n){return new(n||t)},imports:[[r.c,S,i.s,y.a]]}),t})()},bxdZ:function(t,n,e){"use strict";e.d(n,"a",function(){return c});var r=e("fXoL");let c=(()=>{class t{constructor(){}popupPrint(t){const n=document.querySelector(t).innerHTML,e=window.open("","_blank","top=0,left=0,height=auto,width=auto");null==e||e.document.open(),null==e||e.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>\n            .d-flex  {\n              width: 100%;\n              display: flex;\n              justify-content: between;\n            }\n            .table {\n              text-align: left;\n              width: 100%;\n              margin-bottom: 1rem;\n            }\n            .table td, .table th {\n              padding: .75rem;\n              vertical-align: top;\n              border-top: 1px solid #dee2e6;\n            }\n            td {\n              display: table-cell;\n            }\n            @media print {\n              .d-print-none {\n                display: none;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <section class='d-print-none'>\n            <button onclick="window.print();">Print</button>\n            <button onclick="window.close();">Cancel</button>\n          </section>\n         ${n}\n        </body>\n        <script>\n          window.print();\n        <\/script>\n      </html>`)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},oGmh:function(t,n,e){"use strict";e.d(n,"a",function(){return o});var r=e("fXoL"),c=e("bxdZ");let o=(()=>{class t{constructor(t){this.printService=t}print(){this.printService.popupPrint(this.selector)}}return t.\u0275fac=function(n){return new(n||t)(r.Mb(c.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-print"]],inputs:{selector:"selector"},decls:3,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"icon-print"]],template:function(t,n){1&t&&(r.Sb(0,"button",0),r.Zb("click",function(){return n.print()}),r.Ac(1,"Print "),r.Nb(2,"span",1),r.Rb())},styles:[""]}),t})()}}]);