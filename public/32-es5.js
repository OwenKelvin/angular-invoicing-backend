!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function n(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{X019:function(i,t,s){"use strict";s.r(t),s.d(t,"RolesPermissionsModule",function(){return $});var o=s("ofXK"),r=s("tyNb"),c=s("GJmQ"),a=s("fXoL"),l=s("AM43"),b=s("ZOsW"),u=s("3Pt+"),m=s("aFxk");function f(e,i){if(1&e&&(a.Sb(0,"li",14),a.Nb(1,"span",15),a.Ac(2),a.cc(3,"titlecase"),a.Rb()),2&e){var n=i.$implicit;a.Ab(2),a.Cc(" ",a.dc(3,1,n.name)," ")}}function p(e,i){if(1&e){var n=a.Tb();a.Sb(0,"fieldset",10),a.Sb(1,"legend"),a.Ac(2),a.cc(3,"uppercase"),a.Rb(),a.Sb(4,"input",11),a.Zb("ngModelChange",function(e){return a.tc(n),a.bc(2).filter=e}),a.Rb(),a.Sb(5,"ul",12),a.yc(6,f,4,3,"li",13),a.Rb(),a.Rb()}if(2&e){var t=a.bc(2);a.Ab(2),a.Cc("Permissions for roles: ",a.dc(3,3,t.getRoleWithId(t.role).name),""),a.Ab(2),a.hc("ngModel",t.filter),a.Ab(2),a.hc("ngForOf",t.getFilteredPermissionsWithRoleId(t.role))}}function d(e,i){1&e&&(a.Sb(0,"section",16),a.Ac(1,"No Role Selected"),a.Rb())}var g=function(e){return[e,"edit"]};function h(e,i){if(1&e){var n=a.Tb();a.Qb(0),a.Sb(1,"section",2),a.Sb(2,"section",3),a.Sb(3,"label",4),a.Ac(4,"Select Role"),a.Rb(),a.Sb(5,"ng-select",5),a.Zb("ngModelChange",function(e){return a.tc(n),a.bc().role=e}),a.Rb(),a.Rb(),a.Sb(6,"section"),a.Sb(7,"button",6),a.Sb(8,"span",7),a.Ac(9,"Edit"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.yc(10,p,7,5,"fieldset",8),a.yc(11,d,2,0,"ng-template",null,9,a.zc),a.Pb()}if(2&e){var t=a.qc(12),s=a.bc();a.Ab(5),a.hc("items",s.roles)("ngModel",s.role),a.Ab(2),a.hc("routerLink",a.kc(6,g,s.role))("disabled",!s.role),a.Ab(3),a.hc("ngIf",s.role)("ngIfElse",t)}}function v(e,i){1&e&&a.Nb(0,"app-loading-bubble")}var S,y=((S=function(){function i(n){e(this,i),this.rolesPermissionsService=n,this.isLoading=!0}return n(i,[{key:"ngOnInit",value:function(){var e=this;this.filter="",this.componentIsActive=!0,this.roles$=this.rolesPermissionsService.roles$.pipe(Object(c.a)(function(){return e.componentIsActive})),this.roles$.subscribe(function(i){e.roles=i,e.isLoading=!1})}},{key:"getRoleWithId",value:function(e){return this.roles.find(function(i){return i.id===e})}},{key:"getFilteredPermissionsWithRoleId",value:function(e){var i=this;return this.getRoleWithId(e).permissions.filter(function(e){var n=e.name;return new RegExp(i.filter).test(n)})}},{key:"ngOnDestroy",value:function(){this.componentIsActive=!1}}]),i}()).\u0275fac=function(e){return new(e||S)(a.Mb(l.a))},S.\u0275cmp=a.Gb({type:S,selectors:[["app-roles-permissions"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"d-flex","justify-content-between"],[1,"col-lg-4"],["for","role"],["id","role","bindLabel","name","bindValue","id",3,"items","ngModel","ngModelChange"],[1,"btn","btn-primary","btn-sm",3,"routerLink","disabled"],[1,"icon-edit"],["class","mt-3",4,"ngIf","ngIfElse"],["permissionsSection",""],[1,"mt-3"],["aria-label","filter","placeholder","Filter Permissions","type","text","name","","id","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","flex-wrap","pl-0"],["class","col-lg-4 col-md-6 col-sm-12 list-group-item bg-dark",4,"ngFor","ngForOf"],[1,"col-lg-4","col-md-6","col-sm-12","list-group-item","bg-dark"],[1,"icon-thumbs-up","text-success"],[1,"alert","alert-info","mt-3"]],template:function(e,i){if(1&e&&(a.Sb(0,"h1"),a.Ac(1,"Roles and Permissions Management"),a.Rb(),a.yc(2,h,13,8,"ng-container",0),a.yc(3,v,1,0,"ng-template",null,1,a.zc)),2&e){var n=a.qc(4);a.Ab(2),a.hc("ngIf",!i.isLoading)("ngIfElse",n)}},directives:[o.n,b.a,u.m,u.o,r.g,u.b,o.m,m.a],pipes:[o.v,o.u],styles:[""]}),S),R=s("lJxs"),P=s("vkgz"),A=s("5+tZ"),I=s("l3v1"),k=s("hVnv");function F(e,i){if(1&e&&(a.Sb(0,"section",9),a.Nb(1,"app-checkbox",10),a.Rb()),2&e){var n=i.$implicit,t=i.index;a.Eb("text-success",n.value.hasPermission)("text-danger",!n.value.hasPermission),a.hc("formGroupName",t),a.Ab(1),a.hc("label",n.value.name)}}function w(e,i){if(1&e){var n=a.Tb();a.Qb(0),a.Sb(1,"h1"),a.Ac(2,"Roles and Permission Edit "),a.Nb(3,"span",2),a.Ac(4),a.cc(5,"titlecase"),a.Rb(),a.Sb(6,"form",3),a.Zb("submit",function(){return a.tc(n),a.bc().submitPermission()}),a.Sb(7,"fieldset",4),a.Sb(8,"legend"),a.Ac(9,"Permissions"),a.Rb(),a.Sb(10,"section",5),a.yc(11,F,2,6,"section",6),a.Rb(),a.Rb(),a.Sb(12,"section",7),a.Nb(13,"app-validate-submit-buttons",8),a.Rb(),a.Rb(),a.Pb()}if(2&e){var t=a.bc();a.Ab(4),a.Cc(" ",a.dc(5,5,t.role.name)," "),a.Ab(2),a.hc("formGroup",t.permissionsForm),a.Ab(5),a.hc("ngForOf",t.formPermissions.controls),a.Ab(2),a.hc("isSubmitting",t.isSubmitting)("formItem",t.permissionsForm)}}function x(e,i){1&e&&(a.Sb(0,"h1"),a.Ac(1,"Roles and Permission Edit "),a.Rb(),a.Nb(2,"app-loading-bubble"))}var M,O,j,E=[{path:"",pathMatch:"full",data:{breadcrumb:null},component:y},{path:":id",data:{breadcrumb:null},children:[{path:"edit",data:{breadcrumb:"Edit"},component:(M=function(){function i(n,t,s){e(this,i),this.rolesPermissionService=n,this.route=t,this.fb=s}return n(i,[{key:"ngOnInit",value:function(){var e=this;this.componentIsActive=!0,this.isLoading=!0,this.role$=this.route.paramMap.pipe(Object(R.a)(function(e){return Number(e.get("id"))})).pipe(Object(P.a)(function(i){return e.roleId=i})).pipe(Object(A.a)(function(i){return e.rolesPermissionService.getAllPermissionsStatusForRole(i)})).pipe(Object(c.a)(function(){return e.componentIsActive})),this.role$.subscribe(function(i){e.isLoading=!1,e.role=i,e.updatePermissionsForm()})}},{key:"updatePermissionsForm",value:function(){var e=this;this.permissionsForm=this.fb.group({permissions:this.fb.array([])}),this.role.permissionStatus.forEach(function(i){var n=i.id,t=i.hasPermission,s=i.name;e.formPermissions.push(e.fb.group({id:[n,[u.v.required]],name:[s],hasPermission:[t]}))})}},{key:"formPermissions",get:function(){return this.permissionsForm.get("permissions")}},{key:"submitPermission",value:function(){var e=this;this.isSubmitting=!0,this.formPermissions.controls.filter(function(e){return e.dirty}).map(function(e){return e.value}).forEach(function(i){var n=i.name,t=i.hasPermission;e.rolesPermissionService.updatePermissionForRoleWithId(e.roleId,{name:n,hasPermission:t}).pipe(Object(c.a)(function(){return e.componentIsActive})).subscribe(function(){e.isSubmitting=!1},function(){return e.isSubmitting=!1})})}}]),i}(),M.\u0275fac=function(e){return new(e||M)(a.Mb(l.a),a.Mb(r.a),a.Mb(u.d))},M.\u0275cmp=a.Gb({type:M,selectors:[["app-roles-permission-edit"]],decls:4,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"icon-right-dir"],[3,"formGroup","submit"],["formArrayName","permissions"],[1,"d-flex","flex-wrap"],["class","col-lg-4",3,"formGroupName","text-success","text-danger",4,"ngFor","ngForOf"],[1,"p-2"],[3,"isSubmitting","formItem"],[1,"col-lg-4",3,"formGroupName"],["formControlName","hasPermission",3,"label"]],template:function(e,i){if(1&e&&(a.yc(0,w,14,7,"ng-container",0),a.Ob(1),a.yc(2,x,3,0,"ng-template",null,1,a.zc)),2&e){var n=a.qc(3);a.hc("ngIf",!i.isLoading)("ngIfElse",n)}},directives:[o.n,u.x,u.n,u.h,u.c,o.m,I.a,u.i,k.a,u.m,u.g,m.a],pipes:[o.u],styles:[""]}),M)}]}],N=((O=function i(){e(this,i)}).\u0275mod=a.Kb({type:O}),O.\u0275inj=a.Jb({factory:function(e){return new(e||O)},imports:[[r.j.forChild(E)],r.j]}),O),C=s("Yg/+"),G=s("jdGB"),L=s("IVO7"),W=s("GTn6"),$=((j=function i(){e(this,i)}).\u0275mod=a.Kb({type:j}),j.\u0275inj=a.Jb({factory:function(e){return new(e||j)},imports:[[o.c,N,b.b,u.j,u.s,G.a,r.j,L.a,C.a,W.a]]}),j)}}])}();