!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,c=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(u){c=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(c)throw o}}return n}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var c=u(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{aFxk:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("fXoL"),c=function(){var t=function(){function t(){b(this,t)}return s(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-loading-bubble"]],decls:4,vars:0,consts:[["role","status",1,"spinner-grow"],[1,"sr-only"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"span",1),r.Ac(2,"Loading..."),r.Rb(),r.Rb(),r.Ac(3,"\nPlease wait..."))},styles:[""]}),t}()},aPer:function(n,r,a){"use strict";a.r(r),a.d(r,"EditSoldProductsModule",function(){return G});var u=a("ofXK"),l=a("tyNb"),d=a("2Vo4"),f=a("itXk"),p=a("vkgz"),y=a("lJxs"),S=a("1G5W"),m=a("5+tZ"),h=a("B/gT"),v=a("JwhK"),g=a("cTCC"),j=a("sEf6"),A=a("fXoL"),O=a("K3ix"),R=a("l7P3"),w=a("kOKB"),I=a("+MiJ"),$=a("oGmh");function P(t,e){1&t&&(A.Sb(0,"tr"),A.Sb(1,"td",10),A.Ac(2," No sale on this date found! "),A.Rb(),A.Rb())}function D(t,e){1&t&&(A.Sb(0,"span"),A.Ac(1,"s"),A.Rb())}function k(t,e){if(1&t){var n=A.Tb();A.Sb(0,"tr"),A.Sb(1,"td"),A.Ac(2),A.Rb(),A.Sb(3,"td"),A.Ac(4),A.Rb(),A.Sb(5,"td"),A.Ac(6),A.cc(7,"titlecase"),A.Rb(),A.Sb(8,"td"),A.Ac(9),A.cc(10,"currency"),A.Rb(),A.Sb(11,"td"),A.Ac(12),A.yc(13,D,2,0,"span",8),A.Ac(14),A.cc(15,"currency"),A.Rb(),A.Sb(16,"td",7),A.Sb(17,"button",11),A.Zb("click",function(){A.tc(n);var t=e.$implicit;return A.bc(2).editSoldItem(t.id)}),A.Nb(18,"span",12),A.Rb(),A.Sb(19,"button",13),A.Zb("click",function(){A.tc(n);var t=e.$implicit;return A.bc(2).deleteSoldItem(t.id)}),A.Nb(20,"span",14),A.Rb(),A.Rb(),A.Rb()}if(2&t){var r=e.$implicit;A.Ab(2),A.Ec("#",r.productId,"/",r.saleId,"-",r.id,""),A.Ab(2),A.Bc(r.time),A.Ab(2),A.Bc(A.dc(7,9,r.productName)),A.Ab(3),A.Bc(A.ec(10,11,r.price," ")),A.Ab(3),A.Cc("",r.quantity," unit"),A.Ab(1),A.hc("ngIf",r.quantity>1),A.Ab(1),A.Cc(" @ ",A.ec(15,14,r.sellingPrice,r.sellingPriceCurrency+" "),"")}}function x(t,e){if(1&t&&(A.Qb(0),A.yc(1,P,3,0,"tr",8),A.yc(2,k,21,17,"tr",9),A.Pb()),2&t){var n=e.ngIf;A.Ab(1),A.hc("ngIf",n.length<1),A.Ab(1),A.hc("ngForOf",n)}}var M,C,E,B=[{path:"",pathMatch:"full",data:{breadcrumb:null},component:(M=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,n);var r=i(a);function a(n,o,i){var u;return b(this,a),(u=r.call(this)).modalService=n,u.store=o,u.salesService=i,u.deletedIds=[],u.updatedItems={},u.deletedIdSubject$=new d.a([]),u.updateSubject$=new d.a({}),u.updateAction$=u.salesService.updateSoldProductAction$.pipe(Object(p.a)(function(t){return u.updatedItems=Object.assign(Object.assign({},u.updatedItems),c({},t.id,t))}),Object(y.a)(function(){return u.updatedItems}),Object(p.a)(function(t){return u.updateSubject$.next(t)}),Object(S.a)(u.destroyed$)),u.deletedIdAction$=u.salesService.deleteSoldProductAction$.pipe(Object(p.a)(function(t){return u.deletedIds=e(new Set([].concat(e(u.deletedIds),[t])))}),Object(y.a)(function(){return u.deletedIds}),Object(p.a)(function(t){return u.deletedIdSubject$.next(t)}),Object(S.a)(u.destroyed$)),u.storeInjected=u.store,u.modalServiceInjected=u.modalService,u.saleDates$=u.salesService.saleDates$,u.saleDateSubject$=new d.a(new Date),u.saleDateAction$=u.saleDateSubject$.asObservable(),u.sales$=u.saleDateAction$.pipe(Object(m.a)(function(t){return u.salesService.getSoldProductsForDate$(t)})),u.salesFiltered$=Object(f.a)([u.deletedIdSubject$.asObservable(),u.updateSubject$.asObservable(),u.sales$]).pipe(Object(y.a)(function(e){var n=t(e,3),r=n[0],o=n[1],i=n[2],a=Object.assign({},i.reduce(function(t,e){return Object.assign(Object.assign({},t),c({},e.id,Object.assign(Object.assign({},e),null==o?void 0:o[e.id])))},{}));return Object.values(a).filter(function(t){return!r.includes(t.id)})})),u}return s(a,[{key:"ngOnInit",value:function(){this.deletedIdAction$.subscribe(),this.updateAction$.subscribe()}},{key:"deleteSoldItem",value:function(t){this.openModal({id:t,component:v.a})}},{key:"editSoldItem",value:function(t){this.openModal({id:t,component:g.a})}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}}]),a}(Object(h.a)(Object(j.a)())),M.\u0275fac=function(t){return new(t||M)(A.Mb(O.a),A.Mb(R.h),A.Mb(w.a))},M.\u0275cmp=A.Gb({type:M,selectors:[["app-edit-sold-products"]],features:[A.xb],decls:27,vars:4,consts:[[1,"d-flex","flex-wrap","align-items-end","justify-content-between"],[1,"col-md-4","col-xl-3","col-lg-3","col-sm-4"],["label","Sale Date",3,"enabledDates$","ngModelChange"],[1,"col-xl-2","col-md-2","text-md-right","col-lg-2","text-right","mt-3"],["selector",".printable"],[1,"printable"],[1,"mt-2","table","table-sm","table-dark"],[1,"d-print-none"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"alert","alert-info","p-2","m-2"],["aria-label","Edit Item",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],[1,"icon-edit"],["aria-label","Delete",1,"btn","btn-sm","btn-danger",3,"click"],[1,"icon-trash"]],template:function(t,e){1&t&&(A.Sb(0,"h1"),A.Ac(1,"Edit Sales"),A.Rb(),A.Sb(2,"div",0),A.Sb(3,"section",1),A.Sb(4,"app-date-picker",2),A.Zb("ngModelChange",function(t){return e.saleDateSubject$.next(t)}),A.Rb(),A.Rb(),A.Sb(5,"section",3),A.Nb(6,"app-print",4),A.Rb(),A.Rb(),A.Sb(7,"div",5),A.Sb(8,"div",5),A.Sb(9,"table",6),A.Sb(10,"thead"),A.Sb(11,"tr"),A.Sb(12,"th"),A.Ac(13,"Ref"),A.Rb(),A.Sb(14,"th"),A.Ac(15,"Time"),A.Rb(),A.Sb(16,"th"),A.Ac(17,"Product Name"),A.Rb(),A.Sb(18,"th"),A.Ac(19,"Purchase Price"),A.Rb(),A.Sb(20,"th"),A.Ac(21,"Selling Price"),A.Rb(),A.Sb(22,"th",7),A.Ac(23,"Action"),A.Rb(),A.Rb(),A.Rb(),A.Sb(24,"tbody"),A.yc(25,x,3,2,"ng-container",8),A.cc(26,"async"),A.Rb(),A.Rb(),A.Rb(),A.Rb()),2&t&&(A.Ab(4),A.hc("enabledDates$",e.saleDates$),A.Ab(21),A.hc("ngIf",A.dc(26,2,e.salesFiltered$)))},directives:[I.a,$.a,u.n,u.m],pipes:[u.b,u.u,u.d],styles:[""]}),M),canDeactivate:[a("wNMA").a]}],N=((C=function t(){b(this,t)}).\u0275mod=A.Kb({type:C}),C.\u0275inj=A.Jb({factory:function(t){return new(t||C)},imports:[[l.j.forChild(B)],l.j]}),C),T=a("B3RB"),_=a("7HrD"),F=a("Yg/+"),J=a("3Pt+"),K=a("jdGB"),G=((E=function t(){b(this,t)}).\u0275mod=A.Kb({type:E}),E.\u0275inj=A.Jb({factory:function(t){return new(t||E)},imports:[[J.j,J.s,u.c,N,T.a,_.a,O.b.forRoot(),F.a,K.a]]}),E)}}])}();