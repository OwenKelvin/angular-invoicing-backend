!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CG4G:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return function e(){l(this,e)}}();return function(e){o(n,e);var t=a(n);function n(){return l(this,n),t.apply(this,arguments)}return i(n,[{key:"getColorString",value:function(e){return["hsl(",Math.floor(120*e/100),",100%,50%)"].join("")}}]),n}(e)}},QlUG:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var r,c,s=n("fXoL"),u=n("3Pt+"),d=n("2Vo4"),p=n("hc/g"),f=n("ofXK"),b=((r=function(){function e(t){l(this,e),this.toggleType=new s.n,this.element=t.nativeElement}return i(e,[{key:"onTouchStart",value:function(){this.toggleType.emit("text")}},{key:"onTouchEnd",value:function(){this.toggleType.emit("password")}},{key:"onMouseDown",value:function(){this.toggleType.emit("text")}},{key:"onMouseUp",value:function(){this.toggleType.emit("password")}},{key:"onEnterKeyPress",value:function(e){"Enter"===e.key&&this.toggleType.emit("text")}},{key:"onEnterKeyUp",value:function(e){"Enter"===e.key&&this.toggleType.emit("password")}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Mb(s.l))},r.\u0275dir=s.Hb({type:r,selectors:[["","appShowPassword",""]],hostBindings:function(e,t){1&e&&s.Zb("touchstart",function(){return t.onTouchStart()})("touchend",function(){return t.onTouchEnd()})("mousedown",function(){return t.onMouseDown()})("mouseup",function(){return t.onMouseUp()})("keypress",function(e){return t.onEnterKeyPress(e)})("keyup",function(e){return t.onEnterKeyUp(e)})},outputs:{toggleType:"toggleType"}}),r),h=n("CG4G"),g=function(e){return{width:e}},m=function(e){return{backgroundColor:e}},v=((c=function(e){o(n,e);var t=a(n);function n(){return l(this,n),t.call(this)}return i(n,[{key:"passwordStrength",get:function(){var e=this.passwordString||"",t=[{regex:/[a-z]/,value:1},{regex:/[a-z](.)*[a-z]/,value:3},{regex:/[A-Z]/,value:1},{regex:/[A-Z](.)*[A-Z]/,value:2},{regex:/\W|_/,value:2},{regex:/(\W|_)(.)*(\W|_)/,value:3},{regex:/[0-9]/,value:2},{regex:/[0-9](.)*[0-9]/,value:2}].reduce(function(t,n){return t+(n.regex.test(e)?n.value:0)},0);return(Math.min(4,e.length/2)+t)/20*100}},{key:"colorString",get:function(){return this.getColorString(this.passwordStrength)}}]),n}(Object(h.a)())).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=s.Gb({type:c,selectors:[["app-password-meter"]],inputs:{passwordString:"passwordString"},features:[s.xb],decls:7,vars:14,consts:[[1,"progress"],["role","progressbar","aria-valuenow","15","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated",3,"ngStyle"],["role","progressbar","aria-valuenow","15","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-secondary",3,"ngStyle"]],template:function(e,t){1&e&&(s.Sb(0,"small"),s.Ac(1,"New Password Strength"),s.Rb(),s.Sb(2,"div",0),s.Sb(3,"div",1),s.Ac(4),s.cc(5,"number"),s.Rb(),s.Nb(6,"div",2),s.Rb()),2&e&&(s.Ab(3),s.wc(s.kc(8,g,t.passwordStrength+"%")),s.hc("ngStyle",s.kc(10,m,t.colorString)),s.Ab(1),s.Cc(" ",s.ec(5,5,t.passwordStrength,"2.0-0"),"% "),s.Ab(2),s.hc("ngStyle",s.kc(12,g,100-t.passwordStrength+"%")))},directives:[f.o],pipes:[f.f],styles:[""]}),c);function y(e,t){if(1&e&&(s.Sb(0,"section",9),s.Sb(1,"span",10),s.Nb(2,"i"),s.Rb(),s.Rb()),2&e){var n=s.bc();s.Eb("is-invalid",n.fieldError),s.Ab(1),s.hc("id","inputGroupPrepend"+n.id),s.Ab(1),s.Cb(n.prependIcon)}}function w(e,t){if(1&e){var n=s.Tb();s.Sb(0,"section",11),s.Sb(1,"button",12),s.Zb("toggleType",function(e){return s.tc(n),s.bc().fieldType=e}),s.Nb(2,"i"),s.Nb(3,"i"),s.Rb(),s.Rb()}if(2&e){var i=s.bc();s.Ab(2),s.Eb("icon-eye","password"===i.fieldType),s.Ab(1),s.Eb("icon-eye-off","password"!==i.fieldType)}}function S(e,t){if(1&e&&(s.Sb(0,"section",13),s.Nb(1,"div",14),s.Ac(2),s.Rb()),2&e){var n=s.bc();s.Ab(2),s.Cc(" ",n.fieldError," ")}}function P(e,t){if(1&e&&(s.Nb(0,"app-password-meter",15),s.cc(1,"async")),2&e){var n=s.bc();s.hc("passwordString",s.dc(1,1,n.passwordStringChangeAction$))}}var C,k=function(e){return[e]},A=((C=function(){function e(t){l(this,e),this.appFormService=t,this.formControl=new u.e,this.showPasswordStrength=!1,this.fieldType="text",this.passwordStringChangeSubject$=new d.a(""),this.passwordStringChangeAction$=this.passwordStringChangeSubject$.asObservable()}return i(e,[{key:"ngOnInit",value:function(){["tel","phone","password","number","date","datetime-local"].includes(this.type)&&(this.fieldType=this.type)}},{key:"isRequired",get:function(){if(this.formControl.validator){var e=this.formControl.validator(this.formControl);return null!==e&&!0===e.required}return!1}},{key:"setDisabledState",value:function(e){this.disabled||(e?this.disabled=!0:(this.formControl.enable(),this.formControl.updateValueAndValidity()))}},{key:"ngOnChanges",value:function(e){var t=e.triggerValidation;t&&!t.firstChange&&(this.formControl.markAsTouched(),this.validateField())}},{key:"validate",value:function(e){this.formControl=e,this.showPasswordStrength&&this.passwordStringChangeSubject$.next(this.formControl.value)}},{key:"writeValue",value:function(e){void 0!==e&&(this.inputValue=e)}},{key:"registerOnChange",value:function(e){this.onChanges=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"validateField",value:function(){this.fieldError=this.appFormService.getErrorMessage(this.formControl,this.label),this.onTouched()}},{key:"updateFieldValidation",value:function(){this.fieldError&&this.validateField()}}]),e}()).\u0275fac=function(e){return new(e||C)(s.Mb(p.a))},C.\u0275cmp=s.Gb({type:C,selectors:[["app-input"]],inputs:{label:"label",placeholder:"placeholder",id:"id",prependIcon:"prependIcon",formControl:"formControl",triggerValidation:"triggerValidation",autofocus:"autofocus",autocomplete:"autocomplete",type:"type",labelClass:"labelClass",inputClass:"inputClass",step:"step",min:"min",showPasswordStrength:"showPasswordStrength"},features:[s.zb([{provide:u.l,useExisting:Object(s.U)(function(){return C}),multi:!0},{provide:u.k,useExisting:Object(s.U)(function(){return C}),multi:!0}]),s.yb],decls:11,vars:26,consts:[[1,"form-group","mb-4",2,"position","relative"],[1,"d-flex","flex-wrap","m-0","p-0","align-items-center"],[3,"for"],[1,"icon-star","required"],["class","input-group-prepend",3,"is-invalid",4,"ngIf"],[1,"form-control",3,"step","min","autocomplete","autofocus","formControl","id","type","placeholder","keyup","blur"],["class","input-group-append",4,"ngIf"],["class","invalid-feedback-message","style","position: absolute;",4,"ngIf"],[3,"passwordString",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text",3,"id"],[1,"input-group-append"],["appShowPassword","","type","button",1,"show-password",3,"toggleType"],[1,"invalid-feedback-message",2,"position","absolute"],[1,"arrow-up"],[3,"passwordString"]],template:function(e,t){1&e&&(s.Sb(0,"section",0),s.Sb(1,"section",1),s.Sb(2,"label",2),s.Nb(3,"span",3),s.Ac(4),s.Rb(),s.Sb(5,"section"),s.yc(6,y,3,5,"section",4),s.Sb(7,"input",5),s.Zb("keyup",function(){return t.updateFieldValidation()})("blur",function(){return t.validateField()}),s.Rb(),s.yc(8,w,4,4,"section",6),s.yc(9,S,3,1,"section",7),s.Rb(),s.Rb(),s.yc(10,P,2,3,"app-password-meter",8),s.Rb()),2&e&&(s.Ab(2),s.Cb("col-md-12 col-lg-12 col-sm-12 control-label "+t.labelClass+" m-0 p-0"),s.hc("for",t.id),s.Ab(1),s.Eb("required-inVisible",!t.isRequired),s.Ab(1),s.Cc("",t.label," "),s.Ab(1),s.Cb(t.inputClass?t.inputClass+" input-group m-0 p-0":"col-md-12 col-lg-12 "+t.inputClass+" input-group m-0 p-0"),s.Ab(1),s.hc("ngIf",t.prependIcon),s.Ab(1),s.Eb("is-invalid",t.fieldError)("is-valid",t.formControl.valid&&t.formControl.touched),s.hc("step",t.step)("min",t.min)("autocomplete",t.autocomplete)("autofocus",t.autofocus)("formControl",t.formControl)("id",s.kc(24,k,t.id))("type",t.fieldType)("placeholder",t.placeholder),s.Ab(1),s.hc("ngIf","password"===t.type),s.Ab(1),s.hc("ngIf",t.fieldError),s.Ab(1),s.hc("ngIf",t.showPasswordStrength))},directives:[f.n,u.b,u.m,u.f,b,v],pipes:[f.b],styles:["@media (max-width:400px){.input-group-prepend[_ngcontent-%COMP%]{display:none}}.invalid-feedback-message[_ngcontent-%COMP%]{padding:4px;line-height:80%;font-size:65%;background:red;right:4%;margin-bottom:-21px;bottom:0;border-radius:4px;position:absolute}.arrow-up[_ngcontent-%COMP%]{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid red;position:absolute;margin-top:-10px;margin-left:20px}.required[_ngcontent-%COMP%]{font-size:.5em;position:absolute;left:-10px;color:#adff2f}.required-inVisible[_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%] ~ section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]{color:rgba(0,0,0,.2)}input[_ngcontent-%COMP%]:focus ~ section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%], input[_ngcontent-%COMP%] ~ section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]:hover, section[_ngcontent-%COMP%]   .show-password[_ngcontent-%COMP%]:focus{color:#000!important}"]}),C)},aFxk:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("fXoL"),r=function(){var e=function(){function e(){l(this,e)}return i(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["app-loading-bubble"]],decls:4,vars:0,consts:[["role","status",1,"spinner-grow"],[1,"sr-only"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.Sb(1,"span",1),o.Ac(2,"Loading..."),o.Rb(),o.Rb(),o.Ac(3,"\nPlease wait..."))},styles:[""]}),e}()},"hc/g":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("fXoL"),r=function(){var e=function(){function e(){l(this,e)}return i(e,[{key:"getErrorMessage",value:function(e,t){return this.triggerValidation(e)&&e.errors&&e.errors.required?(t?t+" ":"")+"field is required":this.triggerValidation(e)&&e.errors&&e.errors.email?(t?t+" ":"")+"field should be a valid email":this.triggerValidation(e)&&e.errors&&e.errors.minlength?(t?t+" ":"")+"field too short (min ".concat(e.errors.minlength.requiredLength,")"):this.triggerValidation(e)&&e.errors&&e.errors.pattern?"Pattern "+(t?"for "+t+" ":"")+"not met":null}},{key:"triggerValidation",value:function(e){return(e.dirty||e.touched)&&!e.valid}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},oZoq:function(t,n,o){"use strict";o.d(n,"a",function(){return _});var r,a=o("fXoL"),c=o("GJmQ"),s=o("IzEk"),u=o("lJxs"),d=o("5+tZ"),p=o("2Vo4"),f=o("6M/H"),b=o("K3ix"),h=o("vzMs"),g=o("l7P3"),m=o("tk/3"),v=((r=function(){function e(t){l(this,e),this.http=t}return i(e,[{key:"getProfilePicture",value:function(e){var t=e.fileId,n=new m.d;return n.append("Accept","application/pdf"),n.append("Content-Type","application/pdf"),this.http.get("api/files/".concat(t),{headers:n,responseType:"blob"})}},{key:"fitImageOn",value:function(e,t){var n=e.getContext("2d");e.height=e.width;var i,o,r,a,c=t.width/t.height,s=e.width/e.height;c<s?(i=e.height,o=t.width*(i/t.height),r=(e.width-o)/2,a=0):c>s?(o=e.width,i=t.height*(o/t.width),r=0,a=(e.height-i)/2):(i=e.height,o=e.width,r=0,a=0),null==n||n.drawImage(t,r,a,o,i)}}]),e}()).\u0275fac=function(e){return new(e||r)(a.Wb(m.b))},r.\u0275prov=a.Ib({token:r,factory:r.\u0275fac,providedIn:"root"}),r),y=o("3Pt+"),w=o("ofXK"),S=o("wZYl"),P=o("tyNb"),C=["profPic"];function k(e,t){1&e&&(a.Sb(0,"span",26),a.Nb(1,"i",27),a.Rb())}function A(e,t){if(1&e){var n=a.Tb();a.Sb(0,"div",28),a.Sb(1,"input",29,30),a.Zb("change",function(){a.tc(n);var e=a.bc(),t=a.qc(39);return e.onFileSelected(t)}),a.Rb(),a.Sb(3,"button",31),a.Zb("click",function(){return a.tc(n),a.qc(2).click()}),a.Sb(4,"span"),a.Ac(5,"Upload Photo"),a.Rb(),a.Rb(),a.Rb()}}function x(e,t){if(1&e&&(a.Sb(0,"li",21),a.Sb(1,"a",22),a.Ac(2),a.cc(3,"titlecase"),a.Rb(),a.Rb()),2&e){var n=t.$implicit,i=a.bc();a.Ab(1),a.hc("routerLink",i.fullLink(n)),a.Ab(1),a.Bc(a.dc(3,2,n))}}function I(e,t){1&e&&a.Nb(0,"i",45)}function M(e,t){1&e&&a.Nb(0,"i",27)}function O(e,t){if(1&e){var n=a.Tb();a.Sb(0,"div",32),a.Sb(1,"h4",33),a.Ac(2,"Profile Picture Preview"),a.Rb(),a.Sb(3,"button",34),a.Zb("click",function(){return a.tc(n),a.bc().hideModal()}),a.Sb(4,"span",35),a.Ac(5,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",36),a.Sb(7,"div",37),a.Sb(8,"div",38),a.Nb(9,"canvas",39),a.Rb(),a.Rb(),a.Rb(),a.Sb(10,"div",40),a.Sb(11,"button",41),a.Zb("click",function(){return a.tc(n),a.bc().hideModal()}),a.Ac(12,"Cancel"),a.Rb(),a.Sb(13,"button",42),a.Zb("click",function(){return a.tc(n),a.bc().saveProfilePic()}),a.Ac(14," Save Profile Picture "),a.yc(15,I,1,0,"i",43),a.yc(16,M,1,0,"i",44),a.Rb(),a.Rb()}if(2&e){var i=a.bc();a.Ab(15),a.hc("ngIf",!i.savingProfPic),a.Ab(1),a.hc("ngIf",i.savingProfPic)}}var R,N=function(){return["password-management"]},_=((R=function(){function t(e,n,i,o){l(this,t),this.modalService=e,this.usersService=n,this.store=i,this.canvasService=o,this.includeProfileId=!0,this.valueChanged=new a.n,this.editMode=!1,this.componentIsActive=!0,this.profPicLoadingSubject$=new p.a(!0),this.profPicLoadingAction$=this.profPicLoadingSubject$.asObservable()}return i(t,[{key:"ngOnInit",value:function(){this.getProfilePic()}},{key:"editModeChangeHandler",value:function(){this.store.dispatch(this.editMode?Object(f.b)():Object(f.a)())}},{key:"getProfilePic",value:function(){var e=this;this.profPicLoadingSubject$.next(!0),this.usersService.getProfilePicture({userId:this.profile.id}).pipe(Object(c.a)(function(){return e.componentIsActive}),Object(s.a)(1)).subscribe(function(t){e.profPic.nativeElement.src=URL.createObjectURL(t),e.profPicLoadingSubject$.next(!1)})}},{key:"fullName",get:function(){return this.profile.firstName+" "+this.profile.lastName+(this.profile.middleName?" "+this.profile.middleName:"")+(this.profile.otherNames?" "+this.profile.otherNames:"")+(this.profile.userId?" "+this.profile.userId:"")}},{key:"fullLink",value:function(t){return this.includeProfileId?[].concat(e(this.linkBase),[this.profile.id,t]):[].concat(e(this.linkBase),[t])}},{key:"saveProfilePic",value:function(){var e=this;this.savingProfPic=!0,this.usersService.uploadPhoto({file:this.photoFile}).pipe(Object(u.a)(function(e){return e.data.id}),Object(d.a)(function(t){return e.usersService.saveProfilePicture({userId:e.profile.id,profilePicId:t})}),Object(c.a)(function(){return e.componentIsActive})).subscribe({next:function(){e.savingProfPic=!1,e.hideModal(),e.profPic.nativeElement.src=e.photoSrc},error:function(){return e.savingProfPic=!1}})}},{key:"openModal",value:function(e){this.modalRef=this.modalService.show(e),this.modalRef.setClass("modal-md bg-dark text-light modal-container ")}},{key:"hideModal",value:function(){document.querySelector("#profilePhotoInput").value="",this.modalRef.hide()}},{key:"onFileSelected",value:function(e){var t=this,n=document.querySelector("#profilePhotoInput");if(this.photoFile=n.files[0],this.photoFile){this.openModal(e);var i=document.querySelector("#profilePhotoCanvas");this.context=i.getContext("2d");var o=new Image;this.photoSrc=URL.createObjectURL(this.photoFile),o.onload=function(){t.canvasService.fitImageOn(i,o)},o.src=this.photoSrc}}},{key:"changeProfile",value:function(e,t){this.valueChanged.emit({fieldName:e,fieldNewValue:t})}},{key:"ngOnDestroy",value:function(){this.componentIsActive=!1}}]),t}()).\u0275fac=function(e){return new(e||R)(a.Mb(b.a),a.Mb(h.a),a.Mb(g.h),a.Mb(v))},R.\u0275cmp=a.Gb({type:R,selectors:[["app-user-profile"]],viewQuery:function(e,t){var n;1&e&&a.Fc(C,1),2&e&&a.pc(n=a.ac())&&(t.profPic=n.first)},inputs:{title:"title",profile:"profile",linkBase:"linkBase",links:"links",includeProfileId:"includeProfileId"},outputs:{valueChanged:"valueChanged"},decls:40,vars:24,consts:[[1,"d-flex","justify-content-between","align-items-start"],[1,"custom-control","custom-switch","mt-3"],["type","checkbox","id","editMode",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","editMode",1,"custom-control-label"],[1,"d-flex","flex-wrap"],[1,"col-sm-5","col-md-4","col-lg-2","d-flex","justify-content-center"],["class","prof-pic-loading d-flex align-items-center justify-content-center",4,"ngIf"],["class","upload-profile-pic",4,"ngIf"],["src","assets/images/default-user.jpg","onerror",'this.src="assets/images/default-user.jpg";',"alt","",1,"img-thumbnail","img-fluid"],["profPic",""],[1,"col-sm-7","col-md-8","col-lg-9","d-flex","align-items-lg-between","flex-wrap"],[1,"col-lg-12","d-flex","flex-wrap","justify-content-between","align-items-lg-center"],[1,"col-sm-12","d-flex","justify-content-between"],[1,"col-lg-6"],["label","First Name",3,"userId","name","valueChanged"],["label","Last Name",3,"userId","name","valueChanged"],["label","Middle Name",3,"userId","name","valueChanged"],["label","Other Names",3,"userId","name","valueChanged"],[1,"col-sm-12","mt-3"],[1,"nav","nav-tabs","nav-fill"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"col-sm-12","info-route"],["studentId","1"],["template",""],[1,"prof-pic-loading","d-flex","align-items-center","justify-content-center"],[1,"icon-spin3","animate-spin"],[1,"upload-profile-pic"],["id","profilePhotoInput","accept","image/*","hidden","","type","file",3,"change"],["fileInput",""],[1,"btn","btn","secondary",3,"click"],[1,"modal-header","bg-dark"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","bg-dark"],[1,"d-flex","justify-content-center"],[1,"col-lg-12"],["id","profilePhotoCanvas",2,"max-width","500px"],[1,"modal-footer","bg-dark"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click"],["class","icon-floppy",4,"ngIf"],["class","icon-spin3 animate-spin",4,"ngIf"],[1,"icon-floppy"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"h1"),a.Ac(2),a.Rb(),a.Sb(3,"div",1),a.Sb(4,"input",2),a.Zb("ngModelChange",function(e){return t.editMode=e})("ngModelChange",function(){return t.editModeChangeHandler()}),a.Rb(),a.Sb(5,"label",3),a.Ac(6," Enable Editing "),a.Nb(7,"span"),a.Nb(8,"span"),a.Rb(),a.Rb(),a.Rb(),a.Sb(9,"section",4),a.Sb(10,"section",5),a.yc(11,k,2,0,"span",6),a.cc(12,"async"),a.yc(13,A,6,0,"div",7),a.Nb(14,"img",8,9),a.Rb(),a.Sb(16,"section",10),a.Sb(17,"section",11),a.Sb(18,"section",12),a.Sb(19,"h2"),a.Ac(20),a.cc(21,"uppercase"),a.Rb(),a.Rb(),a.Sb(22,"section",13),a.Sb(23,"app-name-item",14),a.Zb("valueChanged",function(e){return t.changeProfile("firstName",e)}),a.Rb(),a.Rb(),a.Sb(24,"section",13),a.Sb(25,"app-name-item",15),a.Zb("valueChanged",function(e){return t.changeProfile("lastName",e)}),a.Rb(),a.Rb(),a.Sb(26,"section",13),a.Sb(27,"app-name-item",16),a.Zb("valueChanged",function(e){return t.changeProfile("middleName",e)}),a.Rb(),a.Rb(),a.Sb(28,"section",13),a.Sb(29,"app-name-item",17),a.Zb("valueChanged",function(e){return t.changeProfile("otherNames",e)}),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(30,"section",18),a.Sb(31,"ul",19),a.yc(32,x,4,4,"li",20),a.Sb(33,"li",21),a.Sb(34,"a",22),a.Ac(35,"Password Management"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(36,"section",23),a.Nb(37,"router-outlet",24),a.Rb(),a.Rb(),a.yc(38,O,17,2,"ng-template",null,25,a.zc)),2&e&&(a.Ab(2),a.Cc("",t.title," Profile "),a.Ab(2),a.hc("ngModel",t.editMode),a.Ab(3),a.Eb("icon-edit",t.editMode),a.Ab(1),a.Eb("icon-eye",!t.editMode),a.Ab(3),a.hc("ngIf",a.dc(12,19,t.profPicLoadingAction$)),a.Ab(2),a.hc("ngIf",t.editMode),a.Ab(7),a.Bc(a.dc(21,21,t.fullName)),a.Ab(3),a.hc("userId",t.profile.id)("name",t.profile.firstName),a.Ab(2),a.hc("userId",t.profile.id)("name",t.profile.lastName),a.Ab(2),a.hc("userId",t.profile.id)("name",t.profile.middleName),a.Ab(2),a.hc("userId",t.profile.id)("name",t.profile.otherNames),a.Ab(3),a.hc("ngForOf",t.links),a.Ab(2),a.hc("routerLink",a.jc(23,N)))},directives:[y.a,y.m,y.o,w.n,S.a,w.m,P.i,P.h,P.k],pipes:[w.b,w.v,w.u],styles:["h2[_ngcontent-%COMP%]{max-height:35px}.nav[_ngcontent-%COMP%]{border-bottom:0;margin-top:-5px}.info-route[_ngcontent-%COMP%]{margin-right:15px;margin-left:15px;min-height:270px;margin-top:-1px;z-index:1;max-width:calc(100% - 20px)}.active[_ngcontent-%COMP%], .info-route[_ngcontent-%COMP%]{background:#232323!important;border:1px solid #585858!important;position:relative}.active[_ngcontent-%COMP%]{color:#adff2f!important;border-bottom:none!important;z-index:10;border-top-left-radius:15px;border-top-right-radius:15px}.nav-link[_ngcontent-%COMP%]:active, .nav-link[_ngcontent-%COMP%]:focus{outline-style:dashed}"]}),R)},vzMs:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("tk/3"),r=n("lJxs"),a=n("fXoL"),c=function(){var e=function(){function e(t){var n=this;l(this,e),this.http=t,this.users$=this.http.get("api/users").pipe(Object(r.a)(function(e){return e})),this.resetPasswordForUserWithId=function(e){var t=e.id,i=e.resetPassword;return n.http.post("api/users/".concat(t,"/password-reset"),{reset_password:i})}}return i(e,[{key:"findIfEmailExists",value:function(e){return this.http.get("api/users/email/?q=".concat(e))}},{key:"update",value:function(e){var t,n,i,o=e.userId,r=e.fieldName,a=e.fieldNewValue,c=(i=a,(n=r)in(t={})?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t);return this.http.post("api/users/".concat(o),{_method:"PATCH",first_name:c.FirstName,last_name:c.LastName,middle_name:c.MiddleName,other_names:c.OtherNames,gender_id:c.gender,religion_id:c.religion,date_of_birth:c.DateOfBirth,email:c.Email,phone:c.Phone})}},{key:"uploadPhoto",value:function(e){var t=e.file,n=new FormData,i=new o.d;return i.append("Content-Type","multipart/form-data"),i.append("Accept","application/json"),n.append("profilePicture",t),this.http.post("api/users/profile-picture",n,{headers:i})}},{key:"saveProfilePicture",value:function(e){var t=e.userId,n=e.profilePicId;return this.http.post("api/users/".concat(t),Object.assign(Object.assign({},{profile_pic_id:n}),{_method:"PATCH"}))}},{key:"getProfilePicture",value:function(e){var t=e.userId,n=new o.d;return n.append("Accept","application/pdf"),n.append("Content-Type","application/pdf"),this.http.get("api/users/profile-picture/".concat(t),{headers:n,responseType:"blob"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Wb(o.b))},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},wZYl:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n("fXoL"),r=n("3Pt+"),a=n("l7P3"),c=n("GJmQ"),s=n("gEt1"),u=n("vzMs"),d=n("ofXK"),p=n("QlUG");function f(e,t){1&e&&o.Nb(0,"i",13)}function b(e,t){1&e&&o.Nb(0,"i",14)}function h(e,t){if(1&e){var n=o.Tb();o.Sb(0,"div",5),o.Nb(1,"app-input",6),o.Sb(2,"div",7),o.Sb(3,"button",8),o.Zb("click",function(){return o.tc(n),o.bc().editable=!1}),o.Ac(4,"Cancel "),o.Rb(),o.Sb(5,"button",9),o.yc(6,f,1,0,"i",10),o.yc(7,b,1,0,"i",11),o.Nb(8,"span",12),o.Ac(9,"Save "),o.Rb(),o.Rb(),o.Rb()}if(2&e){var i=o.bc();o.Ab(1),o.hc("type",i.type)("label",i.label)("placeholder","Enter "+i.label),o.Ab(4),o.hc("disabled",i.itemForm.invalid||!i.itemForm.dirty),o.Ab(1),o.hc("ngIf",i.itemForm.valid&&!i.isSubmitting),o.Ab(1),o.hc("ngIf",i.isSubmitting)}}function g(e,t){if(1&e){var n=o.Tb();o.Sb(0,"button",15),o.Zb("click",function(){return o.tc(n),o.bc().editable=!0})("mouseout",function(){return o.tc(n),o.bc().editHovered=!1})("mouseover",function(){return o.tc(n),o.bc().editHovered=!0}),o.Nb(1,"span"),o.Rb()}if(2&e){var i=o.bc();o.Bb("aria-label","Edit "+i.label+" Name"),o.Ab(1),o.Eb("icon-pencil-1",!i.editHovered)("icon-edit",i.editHovered)}}var m=function(){var e=function(){function e(t,n,i){l(this,e),this.fb=t,this.usersService=n,this.store=i,this.label="",this.valueChanged=new o.n,this.editHovered=!1,this.editable=!1,this.isSubmitting=!1}return i(e,[{key:"ngOnInit",value:function(){var e;this.editMode$=this.store.pipe(Object(a.t)(s.b)),this.componentIsActive=!0,this.itemForm=this.fb.group({name:[this.name,r.v.minLength(2)]}),["first","last","email"].includes(this.label.toLocaleLowerCase())&&(null===(e=this.itemForm.get("name"))||void 0===e||e.setValidators([r.v.required,r.v.minLength(2)])),this.itemForm.updateValueAndValidity()}},{key:"submitFormItem",value:function(){var e,t=this;if(this.itemForm.valid){this.isSubmitting=!0;var n=null===(e=this.itemForm.get("name"))||void 0===e?void 0:e.value;this.usersService.update({fieldName:this.label.replace(" ",""),fieldNewValue:n,userId:this.userId}).pipe(Object(c.a)(function(){return t.componentIsActive})).subscribe({complete:function(){return t.isSubmitting=!1},next:function(){t.valueChanged.emit(n),t.editable=!1}})}else alert("Form not filled correctly")}},{key:"ngOnDestroy",value:function(){this.componentIsActive=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Mb(r.d),o.Mb(u.a),o.Mb(a.h))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-name-item"]],inputs:{type:"type",name:"name",label:"label",userId:"userId"},outputs:{valueChanged:"valueChanged"},decls:10,vars:9,consts:[[1,"d-flex","flex-wrap","align-items-center",3,"formGroup","submit"],["class","edit-field p-3 pt-0",4,"ngIf"],[1,"label","col-xs-12","col-sm-4","col-lg-4"],[1,"value","col","col-xs-12","p-1","d-flex","justify-content-between"],["type","button","class","icon",3,"click","mouseout","mouseover",4,"ngIf"],[1,"edit-field","p-3","pt-0"],["type","text","id","itemNameInput","labelClass","col-lg-12","inputClass","col-lg-12","formControlName","name",3,"type","label","placeholder"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","mt-2",3,"click"],[1,"btn","btn-success","mt-2",3,"disabled"],["class","icon-floppy",4,"ngIf"],["class","icon-spin3 animate-spin",4,"ngIf"],[1,"icon-save"],[1,"icon-floppy"],[1,"icon-spin3","animate-spin"],["type","button",1,"icon",3,"click","mouseout","mouseover"]],template:function(e,t){1&e&&(o.Sb(0,"section"),o.Sb(1,"form",0),o.Zb("submit",function(){return t.submitFormItem()}),o.yc(2,h,10,6,"div",1),o.Sb(3,"div",2),o.Ac(4),o.cc(5,"titlecase"),o.Rb(),o.Sb(6,"div",3),o.Ac(7),o.yc(8,g,2,5,"button",4),o.cc(9,"async"),o.Rb(),o.Rb(),o.Rb()),2&e&&(o.Ab(1),o.hc("formGroup",t.itemForm),o.Ab(1),o.hc("ngIf",t.editable),o.Ab(2),o.Cc("",o.dc(5,5,t.label),":"),o.Ab(3),o.Cc(" \xa0 ",t.name," "),o.Ab(1),o.hc("ngIf",o.dc(9,7,t.editMode$)))},directives:[r.x,r.n,r.h,d.n,p.a,r.m,r.g],pipes:[d.u,d.b],styles:[".label[_ngcontent-%COMP%], .name-field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;line-height:2em}.value[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,82.7%,.3);margin-top:5px}.icon[_ngcontent-%COMP%]{background-color:inherit;border:none;padding:0;color:#2cb5e2}.icon[_ngcontent-%COMP%]:hover{color:#b8e75a}.edit-field[_ngcontent-%COMP%]{position:absolute;top:0;background-color:#2e2b2b;width:100%;z-index:30;border-radius:5px;border:double grey}"]}),e}()}}])}();