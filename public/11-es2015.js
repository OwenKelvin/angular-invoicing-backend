(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+P1L":function(t,e,s){"use strict";s.r(e),s.d(e,"UsersModule",function(){return U});var a=s("ofXK"),n=s("tyNb"),r=s("LRne"),c=s("fXoL"),i=s("Mo0h");let o=(()=>{class t{constructor(){this.links$=Object(r.a)([{name:"Admissions",icon:"icon-user-circle-o",link:"users/users-management"},{name:"Roles & Permissions",icon:"icon-sliders",link:"users/roles-and-permissions"}])}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Gb({type:t,selectors:[["app-users"]],decls:3,vars:1,consts:[[3,"links$"]],template:function(t,e){1&t&&(c.Sb(0,"h1"),c.Ac(1,"Users"),c.Rb(),c.Nb(2,"app-links",0)),2&t&&(c.Ab(2),c.hc("links$",e.links$))},directives:[i.a],styles:[""]}),t})();var u=s("lJxs"),f=s("5+tZ"),b=s("lalG"),p=s("oZoq"),d=s("aFxk");const l=function(){return["/users"]},h=function(){return["info"]};function j(t,e){if(1&t){const t=c.Tb();c.Qb(0),c.Sb(1,"app-user-profile",2),c.Zb("valueChanged",function(e){return c.tc(t),c.bc().changeProfile(e)}),c.Rb(),c.Pb()}if(2&t){const t=e.ngIf;c.Ab(1),c.hc("profile",t)("linkBase",c.jc(3,l))("links",c.jc(4,h))}}function O(t,e){1&t&&(c.Sb(0,"h1"),c.Ac(1,"Staff Profile"),c.Rb(),c.Nb(2,"app-loading-bubble"))}let m=(()=>{class t{constructor(t,e){this.route=t,this.supportStaffService=e,this.supportStaffProfile$=this.route.paramMap.pipe(Object(u.a)(t=>Number(t.get("id"))),Object(f.a)(t=>this.supportStaffService.loadStaffWithId$(t)))}changeProfile(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(n.a),c.Mb(b.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-view-user"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["title","Support Staff",3,"profile","linkBase","links","valueChanged"]],template:function(t,e){if(1&t&&(c.yc(0,j,2,5,"ng-container",0),c.cc(1,"async"),c.yc(2,O,3,0,"ng-template",null,1,c.zc)),2&t){const t=c.qc(3);c.hc("ngIf",c.dc(1,2,e.supportStaffProfile$))("ngIfElse",t)}},directives:[a.n,p.a,d.a],pipes:[a.b],styles:[""]}),t})();var S=s("vkgz"),g=s("IzEk"),v=s("l7P3"),y=s("Lp8z"),I=s("4OVp"),P=s("wZYl");function L(t,e){if(1&t){const t=c.Tb();c.Sb(0,"section",2),c.Sb(1,"section",3),c.Sb(2,"app-name-item",4),c.Zb("valueChanged",function(e){return c.tc(t),c.bc().changeProfile("email",e)}),c.Rb(),c.Rb(),c.Sb(3,"section",3),c.Sb(4,"app-name-item",5),c.Zb("valueChanged",function(e){return c.tc(t),c.bc().changeProfile("Phone",e)}),c.Rb(),c.Rb(),c.Sb(5,"section",3),c.Sb(6,"app-name-item",6),c.Zb("valueChanged",function(e){return c.tc(t),c.bc().changeProfile("dateOfBirth",e)}),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=e.ngIf;c.Ab(2),c.hc("userId",t.id)("name",t.email),c.Ab(2),c.hc("userId",t.id)("name",t.phone),c.Ab(2),c.hc("userId",t.id)("name",t.dateOfBirth)}}function $(t,e){1&t&&c.Nb(0,"app-loading-bubble")}const w=[{path:"",pathMatch:"full",data:{breadcrumb:null},component:o},{path:"users-management",loadChildren:()=>Promise.all([s.e(0),s.e(16)]).then(s.bind(null,"92zr")).then(t=>t.UsersManagementModule),data:{breadcrumb:"Users Management"}},{path:"roles-and-permissions",loadChildren:()=>s.e(31).then(s.bind(null,"6ef5")).then(t=>t.RolesAndPermissionsModule),data:{breadcrumb:"Users Management"}},{path:":id",data:{breadcrumb:null},component:m,children:[{path:"info",component:(()=>{class t{constructor(t,e){var s,a;this.store=t,this.route=e,this.routeId=null===(s=this.route.parent)||void 0===s?void 0:s.paramMap.pipe(Object(u.a)(t=>Number(t.get("id")))),this.userProfile$=null===(a=this.routeId)||void 0===a?void 0:a.pipe(Object(f.a)(t=>this.store.pipe(Object(v.t)(Object(I.a)(t)))))}changeProfile(t,e){var s;null===(s=this.routeId)||void 0===s||s.pipe(Object(S.a)(s=>this.store.dispatch(Object(y.c)({data:{id:s,[t]:e}}))),Object(g.a)(1)).subscribe()}updateSelectValue(t,e){var s;null===(s=this.routeId)||void 0===s||s.pipe(Object(S.a)(s=>this.store.dispatch(Object(y.c)({data:{id:s,[t+"_id"]:e.id,[t+"_name"]:e.name}}))),Object(g.a)(1)).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(v.h),c.Mb(n.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-view-user-info"]],decls:4,vars:4,consts:[["class","d-flex flex-wrap name-field  mt-4",4,"ngIf","ngIfElse"],["content_loading",""],[1,"d-flex","flex-wrap","name-field","mt-4"],[1,"col-md-7","col-lg-5","col-sm-12","mb-3"],["type","email","label","Email",3,"userId","name","valueChanged"],["type","tel","label","Phone",3,"userId","name","valueChanged"],["type","date","label","Date of Birth",3,"userId","name","valueChanged"]],template:function(t,e){if(1&t&&(c.yc(0,L,7,6,"section",0),c.cc(1,"async"),c.yc(2,$,1,0,"ng-template",null,1,c.zc)),2&t){const t=c.qc(3);c.hc("ngIf",c.dc(1,2,e.userProfile$))("ngIfElse",t)}},directives:[a.n,P.a,d.a],pipes:[a.b],styles:[""]}),t})()},{path:"password-management",loadChildren:()=>s.e(0).then(s.bind(null,"cUMb")).then(t=>t.PasswordManagementModule)}]}];let k=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(w)],n.j]}),t})();var R=s("MPUB"),A=s("9jGm"),M=s("bOdf"),T=s("JIr8"),_=s("EY2u");const N=Object(v.n)("[Admissions] Load Admissionss"),B=Object(v.n)("[Admissions] Load Admissionss Success",Object(v.s)()),W=Object(v.n)("[Admissions] Load Admissionss Failure",Object(v.s)());var z=s("XP7w"),C=s("AM43");let x=(()=>{class t{constructor(t,e){this.actions$=t,this.rolesPermissionService=e,this.loadAdmissionss$=Object(A.c)(()=>this.actions$.pipe(Object(A.d)(N),Object(M.a)(()=>_.a.pipe(Object(u.a)(t=>B({data:t})),Object(T.a)(t=>Object(r.a)(W({error:t}))))))),this.loadStaffTypes$=Object(A.c)(()=>this.actions$.pipe(Object(A.d)(z.a),Object(M.a)(()=>this.rolesPermissionService.staffTypes().pipe(Object(u.a)(t=>z.c({data:t})),Object(T.a)(t=>Object(r.a)(z.b({error:t})))))))}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(A.a),c.Wb(C.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac}),t})();var Z=s("49x8"),F=s("HEfn"),J=s("hwR6"),G=s("K3ix");let U=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},imports:[[a.c,k,R.a,v.j.forFeature(Z.a,Z.b),A.b.forFeature([x]),F.a,J.a,G.b.forRoot()]]}),t})()},"0+LY":function(t,e,s){"use strict";s.d(e,"b",function(){return o}),s.d(e,"a",function(){return u});var a=s("l7P3"),n=s("49x8");const r=Object(a.o)(n.a);var c=s("Zyve");const i=Object(a.q)(r,t=>t?t[c.c]:{}),o=Object(a.q)(i,t=>Object.values(t).filter(t=>t.id>0)),u=t=>Object(a.q)(i,e=>e?e[t]:null)},"49x8":function(t,e,s){"use strict";s.d(e,"a",function(){return n}),s.d(e,"b",function(){return r});var a=s("Zyve");const n="admissions",r={[a.c]:a.b}},"4OVp":function(t,e,s){"use strict";s.d(e,"a",function(){return o});var a=s("l7P3"),n=s("5IRs"),r=s("n3+1");const c=Object(a.o)(r.b),i=Object(a.q)(c,t=>null==t?void 0:t[n.b]),o=t=>Object(a.q)(i,e=>e&&e.staffs?e.staffs[t]:null)},"5IRs":function(t,e,s){"use strict";s.d(e,"b",function(){return r}),s.d(e,"a",function(){return i});var a=s("l7P3"),n=s("Lp8z");const r="supportStaffs",c=Object(a.p)({},Object(a.r)(n.d,t=>t),Object(a.r)(n.f,t=>t),Object(a.r)(n.e,t=>t),Object(a.r)(n.a,t=>t),Object(a.r)(n.c,(t,e)=>{var s;const a=Object.assign(Object.assign({},t.staffs),{[e.data.id]:Object.assign(Object.assign({},null===(s=t.staffs)||void 0===s?void 0:s[e.data.id]),e.data)});return Object.assign(Object.assign({},t),{staffs:a})}),Object(a.r)(n.b,t=>t),Object(a.r)(n.g,t=>t),Object(a.r)(n.h,t=>t));function i(t,e){return c(t,e)}},AM43:function(t,e,s){"use strict";s.d(e,"a",function(){return f});var a=s("l7P3"),n=s("pLZG"),r=s("vkgz"),c=s("0+LY"),i=s("XP7w"),o=s("fXoL"),u=s("tk/3");let f=(()=>{class t{constructor(t,e){this.http=t,this.store=e,this.loadAllStaffTypes$=this.store.pipe(Object(a.t)(c.b),Object(n.a)(t=>Number(null==t?void 0:t.length)<2),Object(r.a)(()=>this.store.dispatch(Object(i.a)())))}staffTypes(){return this.http.get("api/permissions-and-roles/roles/?staff=true")}updatePermissionForRoleWithId(t,e){return this.http.post(`api/permissions-and-roles/roles/${t}`,Object.assign(Object.assign({},e),{_method:"PATCH"}))}getAllPermissionsStatusForRole(t){return this.http.get(`api/permissions-and-roles/roles/${t}?allPermissions=true`)}getRoleWithId(t){return this.http.get(`api/permissions-and-roles/roles/${t}`)}get roles$(){return this.http.get("api/permissions-and-roles/roles")}}return t.\u0275fac=function(e){return new(e||t)(o.Wb(u.b),o.Wb(a.h))},t.\u0275prov=o.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Lp8z:function(t,e,s){"use strict";s.d(e,"d",function(){return n}),s.d(e,"f",function(){return r}),s.d(e,"e",function(){return c}),s.d(e,"a",function(){return i}),s.d(e,"c",function(){return o}),s.d(e,"b",function(){return u}),s.d(e,"g",function(){return f}),s.d(e,"h",function(){return b});var a=s("l7P3");const n=Object(a.n)("[SupportStaff] Load SupportStaffs"),r=Object(a.n)("[SupportStaff] Load SupportStaffs Success",Object(a.s)()),c=Object(a.n)("[SupportStaff] Load SupportStaffs Failure",Object(a.s)()),i=Object(a.n)("[SupportStaff] Load SupportStaff By Id",Object(a.s)()),o=Object(a.n)("[SupportStaff] Load SupportStaff By Id Success",Object(a.s)()),u=Object(a.n)("[SupportStaff] Load SupportStaff By Id Failure",Object(a.s)()),f=Object(a.n)("[SupportStaff] Load SupportStaff Update",Object(a.s)()),b=Object(a.n)("[SupportStaff] Load SupportStaff Update Success",Object(a.s)())},XP7w:function(t,e,s){"use strict";s.d(e,"a",function(){return n}),s.d(e,"c",function(){return r}),s.d(e,"b",function(){return c});var a=s("l7P3");const n=Object(a.n)("[StaffType] Load StaffTypes"),r=Object(a.n)("[StaffType] Load StaffTypes Success",Object(a.s)()),c=Object(a.n)("[StaffType] Load StaffTypes Failure",Object(a.s)())},Zyve:function(t,e,s){"use strict";s.d(e,"c",function(){return r}),s.d(e,"a",function(){return c}),s.d(e,"b",function(){return o});var a=s("l7P3"),n=s("XP7w");const r="staffTypes",c={},i=Object(a.p)(c,Object(a.r)(n.a,t=>t),Object(a.r)(n.c,(t,e)=>Object.assign(Object.assign({},t),e.data.reduce((t,e)=>Object.assign(Object.assign({},t),{[e.id]:e})))),Object(a.r)(n.b,t=>t));function o(t,e){return i(t,e)}},hwR6:function(t,e,s){"use strict";s.d(e,"a",function(){return l});var a=s("l7P3"),n=s("n3+1"),r=s("9jGm"),c=s("bOdf"),i=s("lJxs"),o=s("JIr8"),u=s("LRne"),f=s("Lp8z"),b=s("fXoL"),p=s("lalG");let d=(()=>{class t{constructor(t,e){this.actions$=t,this.staffService=e,this.loadSupportStaffType$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(f.d),Object(c.a)(()=>this.staffService.staffTypes().pipe(Object(i.a)(t=>f.f({data:t})),Object(o.a)(t=>Object(u.a)(f.e({error:t}))))))),this.loadSupportStaffWithIdUpdate$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(f.g),Object(c.a)(t=>this.staffService.update({id:t.id,data:t.data}).pipe(Object(i.a)(t=>f.h({data:t})),Object(o.a)(t=>Object(u.a)(f.e({error:t}))))))),this.loadStaffById$=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(f.a),Object(c.a)(t=>this.staffService.getSupportStaffById(t.data.id).pipe(Object(i.a)(t=>f.c({data:t})),Object(o.a)(t=>Object(u.a)(f.b({error:t})))))))}}return t.\u0275fac=function(e){return new(e||t)(b.Wb(r.a),b.Wb(p.a))},t.\u0275prov=b.Ib({token:t,factory:t.\u0275fac}),t})(),l=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[a.j.forFeature(n.b,n.a),r.b.forFeature([d])]]}),t})()},lalG:function(t,e,s){"use strict";s.d(e,"a",function(){return h});var a=s("z6cu"),n=s("l7P3"),r=s("0+LY"),c=s("pLZG"),i=s("vkgz"),o=s("lJxs"),u=s("JIr8"),f=s("XP7w"),b=s("4OVp"),p=s("Lp8z"),d=s("fXoL"),l=s("tk/3");let h=(()=>{class t{constructor(t,e){this.store=t,this.http=e,this.loadAllStaffTypes$=this.store.pipe(Object(n.t)(r.b),Object(c.a)(t=>Number(null==t?void 0:t.length)<2),Object(i.a)(()=>this.store.dispatch(Object(f.a)()))),this.loadStaffTypeWithId$=t=>this.store.pipe(Object(n.t)(Object(r.a)(t)),Object(i.a)(t=>{t||this.store.dispatch(Object(f.a)())})),this.loadStaffWithId$=t=>this.store.pipe(Object(n.t)(Object(b.a)(t)),Object(i.a)(e=>e||this.store.dispatch(Object(p.a)({data:{id:t}})))),this.update=({id:t,data:e})=>this.http.post(`api/users/${t}`,Object.assign({},e))}staffTypes(){return this.http.get("api/permissions-and-roles/roles/?staff=true")}getSupportStaffById(t){return this.http.get(`api/users/${t}`).pipe(Object(o.a)(t=>Object.assign(Object.assign({},t),{firstName:t.first_name,middleName:t.middle_name,lastName:t.last_name,otherNames:t.other_names,dateOfBirth:t.date_of_birth,teacherId:t.teacher_id})),Object(u.a)(t=>Object(a.a)(t)))}save(t){return this.http.post("api/users",Object.assign(Object.assign({},t),{date_of_birth:t.dateOfBirth,first_name:t.firstName,last_name:t.lastName,middle_name:t.middleName,other_names:t.otherNames}))}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(n.h),d.Wb(l.b))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"n3+1":function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"a",function(){return r});var a=s("5IRs");const n="users",r={[a.b]:a.a}}}]);